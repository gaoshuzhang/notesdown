[
["index.html", "R 语言学习笔记 第 1 章 前言 致谢 结构 后记", " R 语言学习笔记 Notes on R, Octave, Python, Graphics, Models and Others/The Box of R for Data Science 黄湘云 2018-05-18 22:23:30 CST 第 1 章 前言 荃者所以在鱼，得鱼而忘荃；蹄者所以在兔；得兔而忘蹄；言者所以在意，得意而忘言。吾安得夫忘言之人而与之言哉！ — 摘自 《庄子·杂篇·物》 The fish trap exists because of the fish; once you’ve gotten the fish, you can forget the trap. The rabbit snare exists because of the rabbit; once you’ve gotten the rabbit, you can forget the snare. Words exist because of meaning; once you’ve gotten the meaning, you can forget the words. Where can I find a man who has forgotten words so I can have a word with him ?1 — Chuang Tzu 把平时遇到的问题分类汇总形成一本笔记，用以时常查看和更新。 网罗精美的案例，学习之，应用之 挑选感兴趣的新技能，钻研之 学习心得和体会，尤其是那些年的淌坑经历 从使用者到开发者蜕变，先啃一下 Hadley Wickham 的几本书： The tidyverse style guide/A style guide for the R language http://style.tidyverse.org/ Advanced R https://adv-r.hadley.nz/ R packages http://r-pkgs.had.co.nz/ R for Data Science http://r4ds.had.co.nz/ 要写书搭网站，先看一下 Yihui Xie 的书 bookdown: Authoring Books and Technical Documents with R Markdown https://bookdown.org/yihui/bookdown/ blogdown: Creating Websites with R Markdown https://bookdown.org/yihui/blogdown/ R Markdown: The Definitive Guide https://bookdown.org/yihui/rmarkdown/ 致谢 虚位以待壮士 Thanks go to all contributers in alphabetical order: . 非常感谢谁谁以及谁谁对我的帮助。 黄湘云 于矿大宝源公寓 结构 第一章：数学符号说明 第二章：基础知识 R语言基础、高级技巧 你好，世界。我写了一本书。这本书是这样的，第 4 章介绍了啥啥，第 5 章说了啥啥，然后是啥啥…… 后记 这本书是在 RStudio 内用 R Markdown 写的， Git 控制版本， bookdown 组织章节， knitr 将 R Markdown 源文件转化为 Markdown 文件， Pandoc 再将 Markdown 文件转化为 HTML 文档，而要转化为 PDF 文档则另外需要 TinyTeX 发行版2 和来自 rticles (Allaire et al. 2017) 包的模板（一个基于 Pandoc 的 LaTeX 模板，两个美元符号包含的就是变量，变量基本上是 LaTeX 包的设置选项）。这个网站是通过 Travis-CI 把编译结果（即 _book 目录）推送到 Netlify，实现部署。在 Travis-CI 和 Netlify 都与 Github 绑定的情况下，源代码一发生改变就会触发编译和部署，即持续集成和连续部署，你正在阅读的是 2018-05-18 在 Travis 上构建的。 如果编译和部署成功，你会看到一个绿色的指示器，否则指示器显示红色。 sourceserifpro 设为默认英文字体，inconsolata 用于代码显示，R 包名称在文中以粗体显示，代码块输出用 #&gt; 表示，以区分普通的代码注释 # 我用了两个 R 包编译这本书，分别是 knitr (Xie 2015) 和 bookdown (Xie 2016)。绘图使用的中文字体是思源宋体和思源黑体， showtext 包安装和调用，tikzDevice 和 fontcm 处理其中的数学公式，xkcd 设置漫画手写体风格，以下是我的 R 进程信息： sessionInfo() #&gt; R version 3.4.4 (2017-01-27) #&gt; Platform: x86_64-pc-linux-gnu (64-bit) #&gt; Running under: Ubuntu 14.04.5 LTS #&gt; #&gt; Matrix products: default #&gt; BLAS: /home/travis/R-bin/lib/R/lib/libRblas.so #&gt; LAPACK: /home/travis/R-bin/lib/R/lib/libRlapack.so #&gt; #&gt; locale: #&gt; [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C #&gt; [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 #&gt; [5] LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 #&gt; [7] LC_PAPER=en_US.UTF-8 LC_NAME=C #&gt; [9] LC_ADDRESS=C LC_TELEPHONE=C #&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C #&gt; #&gt; attached base packages: #&gt; [1] methods stats graphics grDevices utils datasets base #&gt; #&gt; loaded via a namespace (and not attached): #&gt; [1] Rcpp_0.12.16 bookdown_0.7 codetools_0.2-15 sysfonts_0.7.2 #&gt; [5] digest_0.6.15 showtextdb_2.0 rprojroot_1.3-2 Rttf2pt1_1.3.6 #&gt; [9] backports_1.1.2 magrittr_1.5 evaluate_0.10.1 stringi_1.2.2 #&gt; [13] extrafontdb_1.0 rmarkdown_1.9 extrafont_0.17 tools_3.4.4 #&gt; [17] stringr_1.3.1 xfun_0.1 yaml_2.1.19 compiler_3.4.4 #&gt; [21] htmltools_0.3.6 knitr_1.20 本书采用 知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议 许可，请君自重，别没事儿拿去传个什么新浪爱问、百度文库以及 XX 经济论坛，项目中代码使用 MIT 协议 开源 参考文献 "],
["section-2.html", "第 2 章 作者简介", " 第 2 章 作者简介 我是黄湘云，即将毕业的硕士研究生，跟随导师学习数理统计，主修 R 语言，顺便学了点统计，南方人， 2017年6月开始混迹于 Github ， 虽然2015年就注册了， 但是一直没有用起来， 后来有了直接的刚需（因为工作需要嘛），全是自学和靠大牛指点，偶尔参加一些技术大会和沙龙， 周边学校也去听讲座， 对学术大牛心里充满无限敬仰， 多亏 qiaozhang1993 搜集各大高校的讲座信息并时常分享于我。 本科学过 Photoshop 接触过 AI 和 AE，后来学了 R 这些就淡忘了，但是图层这个概念却一直记忆犹新，因为图层在 ggplot2 中是一个很关键的概念。 Python 喊着要学，已经叫唤两年了，今年打算学个入门。 Mxnet、Xgboost 和 Stan 也是要学的，下半年正式入职京东了，另外一个可能要学的是 INLA 专用于处理空间广义线性混合效应模型，这个会在混合效应模型的相关章节予以介绍。 "],
["section-3.html", "第 3 章 符号说明", " 第 3 章 符号说明 \\(S \\neq \\varnothing\\) \\(\\mathbf{A,B,C},\\mathsf{A,B,C},\\mathit{A,B,C}\\) \\(\\mathrm{A,B,C}\\) \\(\\mathfrak{A,B,C}\\) \\[X,Y,D, \\mathbf{X,Y,D},\\mathsf{X,Y,D},\\mathit{X,Y,D},\\mathrm{X,Y,D}\\] \\(A,B,C,D\\) 斜体表示普通的集合，\\(X,Y,Z\\) 表示矩阵，\\(a,b,c,d\\) 表示常数，\\(\\alpha,\\beta,\\theta,\\phi,\\kappa\\) 表示模型或者分布函数的参数，\\(\\Theta\\) 表示参数空间，\\(\\mathbb{R}^{n},\\mathbb{C}^{n}\\) 表示特殊的 \\(n\\) 维实（复）数域，\\(\\mathscr{A,B,C,D}\\) 表示一般的数域，\\(\\mathcal{S,P,G}\\) 分别表示随机过程、概率空间和图 符号 含义 符号 含义 \\(\\mathbf{A}\\) 粗体 \\(\\Omega\\) 全集 \\(\\mathit{A}\\) 集合 \\(\\mathbb{R,C}\\) 实（复）数集 \\(\\mathcal{A}\\) 集族 \\(\\varnothing\\) 空集 \\(\\mathsf{A}\\) 矩阵 \\(\\mathsf{A}^{-}\\) 矩阵的广义逆 \\(\\mathsf{A}^\\top\\) 矩阵转置 \\(\\bar{x}\\) 平均值 \\(\\mathsf{A}^\\mathrm{-1}\\) 矩阵的逆 \\(\\vert a \\vert\\) 标量绝对值 \\(\\mathsf{A}^{\\star}\\) 伴随矩阵 \\(\\mathop{\\mathrm{diag}}(\\mathsf{A})\\) 矩阵的对角 \\(\\lVert \\mathsf{A} \\rVert_{1}\\) 矩阵的1范数 \\(\\mathsf{I}\\) 单位矩阵 \\(\\lVert \\mathsf{A} \\rVert_{2}\\) 矩阵的2范数 \\(\\mathsf{I}_{n}\\) \\(n\\) 阶单位矩阵 \\(\\lVert \\mathsf{A} \\rVert_{\\infty}\\) 矩阵的无穷范数 \\(\\mathsf{1}\\) 全1矩阵 \\(\\lVert \\mathsf{X} \\rVert_{1}\\) 向量的1范数 \\(\\mathsf{1}_{n}\\) \\(n\\) 阶全1矩阵 \\(\\lVert \\mathsf{X} \\rVert_{2}\\) 向量的2范数 \\(\\lVert \\mathsf{X} \\rVert_{\\infty}\\) 向量的无穷范数 \\(\\langle\\mathsf{X},\\mathsf{Y}\\rangle\\) 向量的内积 \\(f(\\mathsf{X})\\) 随机变量的函数 \\(\\mathsf{X} \\wedge \\mathsf{Y}\\) 向量的外积 \\(\\nabla{\\mathsf{X}}\\) 向量微分或梯度 \\(\\beta\\) 模型系数 \\(\\theta\\) 模型或分布参数 \\(\\alpha\\) 模型截距 \\(\\Theta\\) 参数空间 \\(\\hat{\\beta}_{ls}\\) 模型系数的LS估计 \\(f(x)\\) 标量值函数 \\(\\hat{\\beta}_{mle}\\) 模型系数的MLE估计 \\(f(\\mathsf{X})\\) 向量的函数 \\(\\hat{\\beta}_{bayes}\\) 模型系数的Bayes估计 \\(\\mathcal{X}\\) 概率空间 \\(\\rho\\) 相关系数 \\(\\kappa\\) 贝塞尔函数的阶 \\(\\phi\\) 尺度参数 \\(u\\) 距离 \\(\\lVert \\mathsf{x}_1 -\\mathsf{x}_2 \\rVert\\) \\(\\mathbb{R}^2\\) 二维实数域 \\(S(x)\\) 空间过程 \\(\\mathcal{S}\\) \\(\\mathcal{S} = \\{S(x):x \\in \\mathbb{R}^2\\}\\) \\(\\mathcal{S}^{\\star}\\) 随机过程 \\(\\mathcal{S}\\) 的近似 多元统计分析 高惠璇 矩阵符号表示 深度学习符号表示 https://github.com/XiangyunHuang/dlbook 举例，线性模型的表示，此处 \\(Y\\) 为 \\(n\\times 1\\)列向量，\\(X\\) 为\\(p\\times n\\)的矩阵，\\(\\beta\\) 为 \\(p\\times 1\\)的列向量 ，\\(\\epsilon\\) 为\\(n\\times1\\)列向量 \\[Y = X&#39;\\beta + \\epsilon\\] \\[\\mathsf{A} = \\varGamma^\\top\\Lambda\\varGamma\\] \\[\\mathsf{u} = (u_1,u_2,\\cdots,u_n)\\] \\[\\mathsf{x} = (x_1,x_2,\\cdots,x_n)\\] 期望 \\(\\mathsf{E}\\) 正态分布 \\(\\mathcal{N}(\\mathsf{x};\\mathsf{\\mu},\\mathsf{\\Sigma})\\) 对数 \\(\\mathsf{\\log}\\) 协方差 \\(\\mathsf{Cov},\\mathsf{Var}\\) 矩阵 \\[\\mathsf{Y} = (\\mathsf{y}^{(1)},\\mathsf{y}^{(n)},\\cdots,\\mathsf{y}^{(n)})\\] 其中 \\(\\mathsf{y}^{(i)} = (y_{1i},y_{2i},\\cdots,y_{ni})\\) 表示第 \\(i\\) 列 梅隆函数(Matern function)是描述空间相关性的常用函数，它带有两参数\\(\\kappa\\) 和 \\(\\phi\\)，具体形式如下： \\[\\rho(u) = \\big\\{2^{\\kappa-1}\\Gamma(\\kappa)\\big\\}^{-1}(u/\\phi)^{\\kappa}K_{\\kappa}(u/\\phi)\\] 其中，\\(K_{\\kappa}(\\cdot)\\) 表示 \\(\\kappa\\) 阶修正的贝塞尔函数 "],
["install-setup.html", "第 4 章 安装与配置 4.1 安装 R 软件 4.2 安装 R 扩展包 4.3 安装 IDE 4.4 配置文件 4.5 小技巧", " 第 4 章 安装与配置 4.1 安装 R 软件 Windows 下安装指导见《R语言忍者秘笈》的第二章3 推荐没事多翻翻官网 FAQ 文档 以及6本自带的手册 An Introduction to R (R-intro) includes information on data types, programming elements, statistical modeling and graphics. This document is based on the Notes on S-PLUS by Bill Venables and David Smith. 介绍数据类型，编程基础，统计模型和图形 Writing R Extensions (R-exts) currently describes the process of creating R add-on packages, writing R documentation, R’s system and foreign language interfaces, and the R API. 描述创建扩展包、写R包文档的过程，介绍 R 系统，外部语言接口以及 R 的API R Data Import/Export (R-data) is a guide to importing and exporting data to and from R. 从 R 导入和导出数据 The R Language Definition (R-lang), a first version of the Kernighan &amp; Ritchie of R, explains evaluation, parsing, object oriented programming, computing on the language, and so forth. 介绍 R 语言程序设计，解释计算、解析、面向对象编程以及计算 R Installation and Administration (R-admin). R 安装和管理 R Internals (R-ints) is a guide to R’s internal structures. (Added in R 2.4.0.) R 内部结构指南 Hadley Wickham 正在写文档介绍 Documentation for R’s internal C API 从源码编译 R 的需求在哪呢？ 爱折腾的极客：玩配置，学习 make 相关工具和 Linux 世界的依赖 追求性能：如 LFS 支持 和 Intel MKL 加速 环境限制：CentOS 6/7 或者红帽系统，自带的R版本比较落后 微软提供的一套 MSR （这里不需要编译） 现在很多东西都讲究 docker 化，直接往 CentOS 系统上编译安装最新版 R 会越来越少，这里给个例子，在 docker 内安装 R 和扩展包，Dockerfile 的内容如下 cat(readLines(con &lt;- file(&quot;docs/Dockerfile&quot;, encoding = &quot;UTF-8&quot;)) ,sep = &quot;\\n&quot;) #&gt; FROM rocker/geospatial:latest #&gt; #&gt; MAINTAINER Xiangyun Huang &lt;xiangyunfaith@outlook.com&gt; #&gt; #&gt; # System dependencies for required R packages #&gt; RUN apt-get update \\ #&gt; &amp;&amp; apt-get install -y --no-install-recommends \\ #&gt; imagemagick \\ #&gt; optipng \\ #&gt; curl \\ #&gt; dieharder \\ #&gt; libdieharder3 \\ #&gt; libdieharder-dev \\ #&gt; libpoppler-cpp-dev \\ #&gt; python-dev \\ #&gt; python-pip \\ #&gt; python-tk \\ #&gt; octave \\ #&gt; proj-bin \\ #&gt; libpaper-utils \\ #&gt; libatlas3-base \\ #&gt; build-essential \\ #&gt; python-wheel \\ #&gt; pstoedit \\ #&gt; &amp;&amp; pip install numpy \\ #&gt; matplotlib #&gt; #&gt; # TinyTeX for PDF #&gt; RUN mkdir ~/.fonts \\ #&gt; &amp;&amp; curl -o ~/.fonts/Inconsolata-Bold.ttf https://raw.githubusercontent.com/google/fonts/master/ofl/inconsolata/Inconsolata-Bold.ttf \\ #&gt; &amp;&amp; curl -o ~/.fonts/Inconsolata-Regular.ttf https://raw.githubusercontent.com/google/fonts/master/ofl/inconsolata/Inconsolata-Regular.ttf \\ #&gt; &amp;&amp; fc-cache -fv ~/.fonts \\ #&gt; &amp;&amp; git clone --depth=1 --branch=master https://github.com/XiangyunHuang/bookdown-chinese.git \\ #&gt; &amp;&amp; cd bookdown-chinese \\ #&gt; &amp;&amp; tlmgr update --all --self \\ #&gt; &amp;&amp; tlmgr install $(cat TeXLive.pkgs | tr &#39;\\n&#39; &#39; &#39;) || true \\ #&gt; &amp;&amp; Rscript -e &quot;devtools::install_github(&#39;leonawicz/mapmate&#39;)&quot; \\ #&gt; &amp;&amp; Rscript -e &quot;devtools::install_github(&#39;dgrtwo/gganimate&#39;)&quot; \\ #&gt; &amp;&amp; Rscript -e &quot;bookdown::render_book(&#39;index.Rmd&#39;)&quot; #&gt; #&gt; RUN mkdir /liftrroot/ #&gt; WORKDIR /liftrroot/ 这种方式可以安装到最新版的 R，同时省去了自己配置安装过程中的麻烦，只是系统自带的 texlive 还是比较旧，如何安装 tlmgr 管理器，安装新的 TeX 包到之前的位置值得考虑，主要目的是为中文的 R Markdown 文档服务。 Pandoc 提供的 LaTeX 文类，是希望用户在 YAML 指定 CJKmainfont 等，显式地安装系统中文字体供使用，楷体和宋体，文泉驿黑体都是系统自带的。要我说可以用思源黑体和宋体，或者自己拷贝一份中文字体到 ~/.fonts 然后刷新，就是添加这样一段代码，这种做法使用最广 RUN mkdir ~/.fonts \\ &amp;&amp; curl -o ~/.fonts/Inconsolata-Bold.ttf https://raw.githubusercontent.com/google/fonts/master/ofl/inconsolata/Inconsolata-Bold.ttf \\ &amp;&amp; curl -o ~/.fonts/Inconsolata-Regular.ttf https://raw.githubusercontent.com/google/fonts/master/ofl/inconsolata/Inconsolata-Regular.ttf \\ &amp;&amp; fc-cache -fv ~/.fonts \\ 文泉驿字体 wqy-unibit-fonts wqy-microhei-fonts wqy-zenhei-fonts 安装 RStudio 或者 RStudio Server 请看官网介绍 https://www.rstudio.com/products/rstudio/download/ http://docs.rstudio.com/ide/server-pro/ 安装 Microsoft R Open https://mran.microsoft.com/documents/rro/installation#revorinst-lin 安装 Machine Learning Server 在线安装 离线安装 4.2 安装 R 扩展包 从指定的镜像站点安装（源头） install.packages(&quot;rbokeh&quot;, repos = &quot;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&quot;) 再指定安装的位置（本地） install.packages(&quot;rbokeh&quot;, repos = c( deltarho = &quot;http://packages.deltarho.org&quot;, getOption(&quot;repos&quot;) ), lib = R.home(&quot;site-library&quot;) ) 安装 Bioconductor 上的 R 包 source(&quot;https://bioconductor.org/biocLite.R&quot;) BiocInstaller::biocLite(&quot;rbokeh&quot;) 安装Github上的R包 devtools::install_github(&quot;bokeh/rbokeh&quot;) 依赖问题：主要针对离线安装和源码编译安装 平台问题：有些 R 包只能装在 Linux 操作系统上 软件问题：有些 R 包要求相应 R 软件版本 特定库依赖：如 RDieHarder 包就依赖 libgsl-dev 和 libdieharder-dev 库 所以我们需要查看以下信息 sessionInfo() #&gt; R version 3.4.4 (2017-01-27) #&gt; Platform: x86_64-pc-linux-gnu (64-bit) #&gt; Running under: Ubuntu 14.04.5 LTS #&gt; #&gt; Matrix products: default #&gt; BLAS: /home/travis/R-bin/lib/R/lib/libRblas.so #&gt; LAPACK: /home/travis/R-bin/lib/R/lib/libRlapack.so #&gt; #&gt; locale: #&gt; [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C #&gt; [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 #&gt; [5] LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 #&gt; [7] LC_PAPER=en_US.UTF-8 LC_NAME=C #&gt; [9] LC_ADDRESS=C LC_TELEPHONE=C #&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C #&gt; #&gt; attached base packages: #&gt; [1] methods stats graphics grDevices utils datasets base #&gt; #&gt; loaded via a namespace (and not attached): #&gt; [1] Rcpp_0.12.16 bookdown_0.7 codetools_0.2-15 sysfonts_0.7.2 #&gt; [5] digest_0.6.15 showtextdb_2.0 rprojroot_1.3-2 Rttf2pt1_1.3.6 #&gt; [9] backports_1.1.2 magrittr_1.5 evaluate_0.10.1 stringi_1.2.2 #&gt; [13] extrafontdb_1.0 rmarkdown_1.9 extrafont_0.17 tools_3.4.4 #&gt; [17] stringr_1.3.1 xfun_0.1 yaml_2.1.19 compiler_3.4.4 #&gt; [21] htmltools_0.3.6 knitr_1.20 有时候甚至是 devtools::session_info(&quot;showtext&quot;) #&gt; Session info ------------------------------------------------------------- #&gt; setting value #&gt; version R version 3.4.4 (2017-01-27) #&gt; system x86_64, linux-gnu #&gt; ui X11 #&gt; language (EN) #&gt; collate en_US.UTF-8 #&gt; tz UTC #&gt; date 2018-05-15 #&gt; Packages ----------------------------------------------------------------- #&gt; package * version date source #&gt; grDevices * 3.4.4 2018-03-15 local #&gt; showtext 0.5-1 2018-01-16 CRAN (R 3.4.4) #&gt; showtextdb 2.0 2017-09-11 CRAN (R 3.4.4) #&gt; sysfonts 0.7.2 2018-01-16 CRAN (R 3.4.4) #&gt; utils * 3.4.4 2018-03-15 local 推荐 devtools::session_info(&quot;package&quot;) 而不是 sessionInfo()，尤其在遇到因为版本不对而带来错误的时候，如 https://d.cosx.org/d/419765-showtext 4.2.1 RDieHarder 在安装 RDieHarder 包之前需要安装依赖库，并且这个 R 包目前只能在 Linux/Mac 系统上安装 sudo apt-get update &amp;&amp; sudo apt-get install -y libgsl-dev libdieharder-dev 安装并加载 RDieHarder 包 library(magrittr) library(RDieHarder) dieharderGenerators() %&gt;% head() #&gt; names id #&gt; 1 borosh13 0 #&gt; 2 cmrg 1 #&gt; 3 coveyou 2 #&gt; 4 fishman18 3 #&gt; 5 fishman20 4 #&gt; 6 fishman2x 5 dieharderTests() %&gt;% head() #&gt; names id #&gt; 1 diehard_birthdays 0 #&gt; 2 diehard_operm5 1 #&gt; 3 diehard_rank_32x32 2 #&gt; 4 diehard_rank_6x8 3 #&gt; 5 diehard_bitstream 4 #&gt; 6 diehard_opso 5 RDieHarder (Eddelbuettel 2018) 由 Dirk Eddelbuettel 开发，将 Robert G. Brown 的工作介绍给 R 用户 4.2.2 SparkR 4.2.3 sparklyr library(sparklyr) # spark_available_versions() spark_install(version = &quot;2.2.0&quot;, hadoop_version = &quot;2.7&quot;) 4.2.4 DBI 这是一个存放在Github上的包，随着 ClikHouse 在大厂的流行，此包也受到越来越多的关注 与数据仓库如何连接，如何查询数据，背后的接口 DBI 如何使用，实例化一个新的接口（如 clickhouse2r ） https://github.com/hannesmuehleisen/clickhouse-r 壮士！交给你个任务，基于 clickhouse 的 odbc 驱动 https://github.com/yandex/clickhouse-odbc 写了 R 包如何，顺带介绍 clickhouse ，再给统计之都投篇稿子，在明年的 R 会给个相关报告。名字 r4clickhouse 还是 clickhouse4r 呢 ClickHouse 独辟蹊径，基于 C++ 的实现，数据查询速度超级快，官网介绍碾压大量传统数据库。还有不少接口，其中还有 R 的 https://github.com/hannesmuehleisen/clickhouse-r 安装 devtools::install_github(&quot;hannesmuehleisen/clickhouse-r&quot;) 下载 https://clickhouse.yandex/docs/en/single/#installation 使用 library(DBI) con &lt;- dbConnect(clickhouse::clickhouse(), host = &quot;localhost&quot;, port = 8123L, user = &quot;default&quot;, password = &quot;&quot; ) dbWriteTable(con, &quot;mtcars&quot;, mtcars) dbListTables(con) dbGetQuery(con, &quot;SELECT COUNT(*) FROM mtcars&quot;) d &lt;- dbReadTable(con, &quot;mtcars&quot;) dbDisconnect(con) 发现它和 knitr 里的 SQL 钩子，都用 DBI 这个R包 https://github.com/rstats-db/DBI knitr::include_graphics(path = &quot;images/clickhouse.png&quot;) 图 4.1: ClickHouse与R 参考 https://d.cosx.org/d/419974-r-markdown-sql ```{r setup} library(DBI) library(RMySQL) # 这里的数据库链接信息我改了 db &lt;- dbConnect(MySQL(), dbname = &quot;dbtest&quot;, username = &quot;user_test&quot;, password = &quot;password&quot;, host = &quot;10.10.101.10&quot;, port = 3306 ) # 创建默认连接 knitr::opts_chunk$set(connection = &quot;db&quot;) # 设置字符，以免中文查询乱码 dbSendQuery(db, &quot;SET NAMES utf8&quot;) # 设置日期变量，以运用在SQL中 idate &lt;- &quot;2018-05-03&quot; # 请忽略我 ``` SQL中使用R的变量并将结果输出为数据框 ```{sql, output.var=&quot;data_output&quot;} SELECT * FROM user_table where date_format(created_date,&#39;%Y-%m-%d&#39;)&gt;=?idate # 请忽略我 ``` 以上代码会将SQL的运行结果存在 data_output 这是数据库中。如果SQL比较长，为了代码美观，把带有变量的SQL保存为.sql脚本，那怎么在SQL的chunk中直接导入SQL文件 ```{sql, code=readLines(&quot;你的脚本.sql&quot;)} ``` 4.2.5 reticulate Python 与 R 交互 4.2.6 INLA 具有非常多的依赖关系，除了 CRAN 还有来自 bioconductor 的包，介绍 http://www.r-inla.org/events/newtutorialsonspatialmodelsininla install.packages(&quot;INLA&quot;, repos = &quot;https://www.math.ntnu.no/inla/R/testing&quot; ) 4.2.7 mxnet 依赖也是很多，主要在于 GPU 版如何安装使用 4.2.8 tensorflow 同样地，依赖也是很多，主要在于 GPU 版如何安装使用 4.3 安装 IDE RStudio 4.4 配置文件 工作目录下的 .Rprofile，设置 site-library，设置环境变量 Renviron 4.5 小技巧 设置 Notepad++ 为 Git Bash 默认编辑器 图 4.2 所示4 knitr::include_graphics(path = &quot;images/git-vim-commit-message.png&quot;) 图 4.2: Notepad++ 与 Git 在 Git Bash 中输入下面一行 git config --global core.editor &quot;&#39;c:\\Program Files\\Notepad++\\notepad++.exe&#39; -multiInst -notabbar -nosession -noPlugin &#39;$*&#39;&quot; Windows下配置 Git 中 ssh-agent 自动启动 https://lfkid.github.io/ 这种让 Git 的 ssh-agent 常驻内存貌似不合理，占内存嘛 设置 ssh 和 store 保存应该比较好 打开 bookdown 项目出来警告 如图 4.3 所示，目前只出现在 Windows 平台下 图 4.3: YAML 扫描错误 直观来看，是字符串 string 本身需要转化为 UTF8（其实是需要YAML区域都变成UTF8），有关详细介绍见 http://biostat.mc.vanderbilt.edu/wiki/Main/YamlR#yaml.load 和 https://github.com/viking/r-yaml yaml::yaml.load #&gt; function (string, as.named.list = TRUE, handlers = NULL, error.label = NULL, #&gt; eval.expr = getOption(&quot;yaml.eval.expr&quot;, TRUE)) #&gt; { #&gt; eval.warning &lt;- missing(eval.expr) &amp;&amp; is.null(getOption(&quot;yaml.eval.expr&quot;)) #&gt; string &lt;- enc2utf8(paste(string, collapse = &quot;\\n&quot;)) #&gt; .Call(C_unserialize_from_yaml, string, as.named.list, handlers, #&gt; error.label, eval.expr, eval.warning, PACKAGE = &quot;yaml&quot;) #&gt; } #&gt; &lt;environment: namespace:yaml&gt; 先看个简单的 yaml::yaml.load(&#39;你好&#39;) #&gt; [1] &quot;你好&quot; 开发者用如下方式避免一个警告 issues #47 yaml::yaml.load(&quot;!expr paste(&#39;orange&#39;)&quot;, handlers = list(expr = function(x) eval(parse(text = x)))) #&gt; [1] &quot;orange&quot; 要么等着 YAML 更新，要么等着 bookdown 或 rmarkdown 更新，目前还是在 rocker 下编辑吧，看着红红的警告信息，心里有点烦。 https://github.com/viking/r-yaml/issues/6 https://github.com/rstudio/rmarkdown/issues/420 https://github.com/rstudio/config/issues/12 参考文献 "],
["math-operator.html", "第 5 章 数学运算 5.1 矩阵运算 5.2 矩阵分解 5.3 特殊函数 5.4 统计分布", " 第 5 章 数学运算 统计计算之矩阵运算，自然离不开 Matrix 包 (Bates and Maechler 2017) 5.1 矩阵运算 A &lt;- matrix(c(1, 2, 2, 3), nrow = 2) A #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 5.1.1 乘法 A %*% A #&gt; [,1] [,2] #&gt; [1,] 5 8 #&gt; [2,] 8 13 5.1.2 Hadamard 积 矩阵每个元素平方 A^2 #&gt; [,1] [,2] #&gt; [1,] 1 4 #&gt; [2,] 4 9 5.1.3 交叉积 crossprod(A, A) # t(x) %*% y #&gt; [,1] [,2] #&gt; [1,] 5 8 #&gt; [2,] 8 13 tcrossprod(A, A) # x %*% t(y) #&gt; [,1] [,2] #&gt; [1,] 5 8 #&gt; [2,] 8 13 5.1.4 外积 A %o% A #&gt; , , 1, 1 #&gt; #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 #&gt; #&gt; , , 2, 1 #&gt; #&gt; [,1] [,2] #&gt; [1,] 2 4 #&gt; [2,] 4 6 #&gt; #&gt; , , 1, 2 #&gt; #&gt; [,1] [,2] #&gt; [1,] 2 4 #&gt; [2,] 4 6 #&gt; #&gt; , , 2, 2 #&gt; #&gt; [,1] [,2] #&gt; [1,] 3 6 #&gt; [2,] 6 9 outer(A, A, FUN = &quot;*&quot;) #&gt; , , 1, 1 #&gt; #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 #&gt; #&gt; , , 2, 1 #&gt; #&gt; [,1] [,2] #&gt; [1,] 2 4 #&gt; [2,] 4 6 #&gt; #&gt; , , 1, 2 #&gt; #&gt; [,1] [,2] #&gt; [1,] 2 4 #&gt; [2,] 4 6 #&gt; #&gt; , , 2, 2 #&gt; #&gt; [,1] [,2] #&gt; [1,] 3 6 #&gt; [2,] 6 9 5.1.5 直积 直积/克罗内克积 A %x% A #&gt; [,1] [,2] [,3] [,4] #&gt; [1,] 1 2 2 4 #&gt; [2,] 2 3 4 6 #&gt; [3,] 2 4 3 6 #&gt; [4,] 4 6 6 9 kronecker(A, A, FUN = &quot;*&quot;) #&gt; [,1] [,2] [,3] [,4] #&gt; [1,] 1 2 2 4 #&gt; [2,] 2 3 4 6 #&gt; [3,] 2 4 3 6 #&gt; [4,] 4 6 6 9 5.1.6 乘方 矩阵 A 首先是一个方阵，对称性和正定性未知，n 个 矩阵 A 相乘 统计之都论坛讨论如何求矩阵的乘方 https://d.cosx.org/d/5619-svd &quot;%^%&quot; &lt;- function(mat, pow) { if (!is.matrix(mat)) mat &lt;- as.matrix(mat) stopifnot(!diff(dim(mat))) if (pow &lt; 0) { pow &lt;- -pow mat &lt;- solve(mat) } pow &lt;- round(pow) switch(pow + 1, return(diag(1, nrow(mat))), return(mat)) get.exponents &lt;- function(pow) if (pow == 0) NULL else c(k &lt;- 2^floor(log2(pow)), get.exponents(pow - k)) ans &lt;- diag(nrow(mat)) dlog2exp &lt;- rev(-diff(c(log2(get.exponents(pow)), 0))) for (j in 1:length(dlog2exp)) { if (dlog2exp[j]) for (i in 1:dlog2exp[j]) mat &lt;- mat %*% mat ans &lt;- ans %*% mat } ans } 奇异值分解 s &lt;- svd(A) all.equal(s$u%*%diag(s$d)%*%t(s$v),A) 特征值及分解 \\(A = V \\Lambda V^{-1}\\) 求解矩阵 A 的 n 次方 eigen(A) #&gt; eigen() decomposition #&gt; $values #&gt; [1] 4.236 -0.236 #&gt; #&gt; $vectors #&gt; [,1] [,2] #&gt; [1,] 0.526 -0.851 #&gt; [2,] 0.851 0.526 eigen(A)$vectors %*% diag(eigen(A)$values) %*% solve(eigen(A)$vectors) #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 eigen(A)$vectors %*% diag(eigen(A)$values)^3 %*% solve(eigen(A)$vectors) #&gt; [,1] [,2] #&gt; [1,] 21 34 #&gt; [2,] 34 55 A %*% A %*% A #&gt; [,1] [,2] #&gt; [1,] 21 34 #&gt; [2,] 34 55 5.1.7 幂 2^A #&gt; [,1] [,2] #&gt; [1,] 2 4 #&gt; [2,] 4 8 exp(A) #&gt; [,1] [,2] #&gt; [1,] 2.72 7.39 #&gt; [2,] 7.39 20.09 5.1.8 行列式 det(A) #&gt; [1] -1 5.1.9 逆 solve(A) #&gt; [,1] [,2] #&gt; [1,] -3 2 #&gt; [2,] 2 -1 应用之线性方程组 B &lt;- Hilbert(6) b &lt;- rowSums(B) # not inv solve(B,b) #&gt; 6 x 1 Matrix of class &quot;dgeMatrix&quot; #&gt; [,1] #&gt; [1,] 1 #&gt; [2,] 1 #&gt; [3,] 1 #&gt; [4,] 1 #&gt; [5,] 1 #&gt; [6,] 1 # inv solve(B) %*% b #&gt; 6 x 1 Matrix of class &quot;dgeMatrix&quot; #&gt; [,1] #&gt; [1,] 1 #&gt; [2,] 1 #&gt; [3,] 1 #&gt; [4,] 1 #&gt; [5,] 1 #&gt; [6,] 1 Moore-Penrose generalized inverse 广义逆，如果 A 可逆则，广义逆就是逆 library(MASS) ginv(A) #&gt; [,1] [,2] #&gt; [1,] -3 2 #&gt; [2,] 2 -1 A %*% ginv(A) %*% A #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 ginv(A) %*% A %*% ginv(A) #&gt; [,1] [,2] #&gt; [1,] -3 2 #&gt; [2,] 2 -1 t(A %*% ginv(A)) #&gt; [,1] [,2] #&gt; [1,] 1.00e+00 8.88e-16 #&gt; [2,] -8.88e-16 1.00e+00 A %*% ginv(A) #&gt; [,1] [,2] #&gt; [1,] 1.00e+00 -8.88e-16 #&gt; [2,] 8.88e-16 1.00e+00 t(ginv(A) %*% A) #&gt; [,1] [,2] #&gt; [1,] 1.00e+00 -8.88e-16 #&gt; [2,] 8.88e-16 1.00e+00 ginv(A) %*% A #&gt; [,1] [,2] #&gt; [1,] 1.00e+00 8.88e-16 #&gt; [2,] -8.88e-16 1.00e+00 ginv 函数实现 # The function is currently defined as function(X, tol = sqrt(.Machine$double.eps)) { ## Generalized Inverse of a Matrix dnx &lt;- dimnames(X) if(is.null(dnx)) dnx &lt;- vector(&quot;list&quot;, 2) s &lt;- svd(X) nz &lt;- s$d &gt; tol * s$d[1] structure( if(any(nz)) s$v[, nz] %*% (t(s$u[, nz])/s$d[nz]) else X, dimnames = dnx[2:1]) } 5.1.10 伴随矩阵 伴随矩阵 \\(A*A^{\\star} = A^{\\star} *A = |A|*I, A^{\\star} = |A|*A^{-1}\\) \\(|A^{\\star}| = |A|^{n-1}, A \\in \\mathbb{R}^{n\\times n},n \\geq 2\\) \\((A^{\\star})^{\\star} = |A|^{n-2}A, A \\in \\mathbb{R}^{n\\times n},n \\geq 2\\) \\((A^{\\star})^{\\star}\\) A 的 n 次伴随是？ det(A)*solve(A) #&gt; [,1] [,2] #&gt; [1,] 3 -2 #&gt; [2,] -2 1 5.1.11 单位矩阵 diag(rep(3)) #&gt; [,1] [,2] [,3] #&gt; [1,] 1 0 0 #&gt; [2,] 0 1 0 #&gt; [3,] 0 0 1 全1矩阵，借助外积运算，如3阶矩阵 rep(1,3) %o% rep(1,3) #&gt; [,1] [,2] [,3] #&gt; [1,] 1 1 1 #&gt; [2,] 1 1 1 #&gt; [3,] 1 1 1 5.1.12 对角矩阵 diag(A) # diagonal of a matrix #&gt; [1] 1 3 diag(diag(A)) # construct a diagonal matrix #&gt; [,1] [,2] #&gt; [1,] 1 0 #&gt; [2,] 0 3 5.1.13 条件数 base::rcond(A) #&gt; [1] 0.04 kappa(A) #&gt; [1] 21.9 Matrix::rcond(Hilbert(6)) #&gt; [1] 3.44e-08 Matrix::rcond(A) #&gt; [1] 0.04 5.1.14 范数 向量和矩阵的范数，包括1，2，无穷范数，其他操作看 Matrix 包 (Bates and Maechler 2017) ，尤其关于稀疏矩阵计算部分 norm(A) #&gt; [1] 5 5.1.15 秩 qr(A)$rank # or qr.default(A)$rank #&gt; [1] 2 5.2 矩阵分解 5.2.1 Cholesky 分解 # Compute the Choleski factorization of a real symmetric positive-definite square matrix. chol(A + diag(rep(1,2))) #&gt; [,1] [,2] #&gt; [1,] 1.41 1.41 #&gt; [2,] 0.00 1.41 # Inverse from Choleski (or QR) Decomposition Matrix::chol2inv(A + diag(rep(1,2))) #&gt; [,1] [,2] #&gt; [1,] 0.3125 -0.0625 #&gt; [2,] -0.0625 0.0625 5.2.2 奇异值及分解 svd(A) #&gt; $d #&gt; [1] 4.236 0.236 #&gt; #&gt; $u #&gt; [,1] [,2] #&gt; [1,] -0.526 -0.851 #&gt; [2,] -0.851 0.526 #&gt; #&gt; $v #&gt; [,1] [,2] #&gt; [1,] -0.526 0.851 #&gt; [2,] -0.851 -0.526 svd(A)$d #&gt; [1] 4.236 0.236 5.2.3 QR分解 qr.default(A) #&gt; $qr #&gt; [,1] [,2] #&gt; [1,] -2.236 -3.578 #&gt; [2,] 0.894 -0.447 #&gt; #&gt; $rank #&gt; [1] 2 #&gt; #&gt; $qraux #&gt; [1] 1.447 0.447 #&gt; #&gt; $pivot #&gt; [1] 1 2 #&gt; #&gt; attr(,&quot;class&quot;) #&gt; [1] &quot;qr&quot; qr.X(qr.default(A)) #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 qr.Q(qr.default(A)) #&gt; [,1] [,2] #&gt; [1,] -0.447 -0.894 #&gt; [2,] -0.894 0.447 qr.R(qr.default(A)) #&gt; [,1] [,2] #&gt; [1,] -2.24 -3.578 #&gt; [2,] 0.00 -0.447 qr.Q(qr.default(A)) %*% qr.R(qr.default(A)) #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 2 3 LU 分解、Jordan分解 矩阵下三角 row 和 col row(A) #&gt; [,1] [,2] #&gt; [1,] 1 1 #&gt; [2,] 2 2 col(A) #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 1 2 A[row(A)] #&gt; [1] 1 3 lower.tri(A) #&gt; [,1] [,2] #&gt; [1,] FALSE FALSE #&gt; [2,] TRUE FALSE upper.tri(A) # 矩阵上三角 #&gt; [,1] [,2] #&gt; [1,] FALSE TRUE #&gt; [2,] FALSE FALSE A[lower.tri(A)] #&gt; [1] 2 A[lower.tri(A)] &lt;- 0 # 获得上三角矩阵 A #&gt; [,1] [,2] #&gt; [1,] 1 2 #&gt; [2,] 0 3 A[row(A) &lt; col(A)] &lt;- 0 A #&gt; [,1] [,2] #&gt; [1,] 1 0 #&gt; [2,] 0 3 Householder 变换 https://www.wikiwand.com/en/Householder_transformation Givens 旋转 https://www.wikiwand.com/en/Givens_rotation 帽子矩阵在统计中的应用 回归与方差分析 (Hoaglin and Welsch 1978) 5.3 特殊函数 5.3.1 阶乘 阶乘 \\(n! = 1\\times 2\\times 3\\cdots n\\) 双阶乘 \\((2n+1)!! = 1 \\times 3\\times 5 \\times \\cdots \\times (2n+1), n = 0,1,2,\\cdots\\) factorial(5) # 阶乘 #&gt; [1] 120 seq(from = 1, to = 5, length.out = 3) #&gt; [1] 1 3 5 prod(seq(from = 1, to = 5, length.out = 3)) # 连乘 双阶乘 #&gt; [1] 15 seq(5) #&gt; [1] 1 2 3 4 5 cumprod(seq(5)) # 累积 #&gt; [1] 1 2 6 24 120 cumsum(seq(5)) # 累和 #&gt; [1] 1 3 6 10 15 此外还有 cummax 和 cummin 组合数 \\(C_{n}^{k} = \\frac{n(n-1)…(n-k+1)}{k!}\\) \\(C_{5}^{3} = \\frac{5 \\times 4 \\times 3}{3 \\times 2 \\times 1}\\) choose(5,3) #&gt; [1] 10 斯特林公式 5.3.2 伽马函数 \\(\\Gamma(x) = \\int_{0}^{\\infty} t^{x-1}\\exp(-t)dt\\) \\(\\Gamma(n) = (n-1)!, n \\in \\mathbb{Z}^{+}\\) gamma(2) #&gt; [1] 1 gamma(10) #&gt; [1] 362880 gamma2 &lt;- function(t,x){ t^(x-1)*exp(-t) } integrate(gamma2, lower = 0, upper = + Inf, x = 10) #&gt; 362880 with absolute error &lt; 0.025 psigamma(x, deriv) 表示 \\(\\psi(x)\\) 的 deriv 阶导数 \\(\\mathrm{digamma}(x) \\triangleq \\psi(x) = \\frac{d}{dx}{\\ln \\Gamma(x)} = \\Gamma&#39;(x) / \\Gamma(x)\\) # 例1 x &lt;- 2 eval(deriv(~ gamma(x), &quot;x&quot;))/gamma(x) #&gt; [1] 1 #&gt; attr(,&quot;gradient&quot;) #&gt; x #&gt; [1,] 0.423 # 与此等价 psigamma(2, 0) #&gt; [1] 0.423 digamma(x) # psi(x) 的一阶导数 #&gt; [1] 0.423 trigamma(x) # psi(x) 的二阶导数 #&gt; [1] 0.645 # 例2 eval(deriv(~ psigamma(x, 1), &quot;x&quot;)) #&gt; [1] 0.645 #&gt; attr(,&quot;gradient&quot;) #&gt; x #&gt; [1,] -0.404 # 与此等价 psigamma(2, 2) #&gt; [1] -0.404 # 注意与下面这个例子比较 dx2x &lt;- deriv(~ x^3, &quot;x&quot;) eval(dx2x) #&gt; [1] 8 #&gt; attr(,&quot;gradient&quot;) #&gt; x #&gt; [1,] 12 5.3.3 贝塔函数 \\(B(a,b) = \\Gamma(a)\\Gamma(b)/\\Gamma(a+b) = \\int_{0}^{1} t^{a-1} (1-t)^{b-1} dt\\) beta(1, 1) #&gt; [1] 1 beta(2, 3) #&gt; [1] 0.0833 beta2 &lt;- function(t, a, b) { t^(a - 1) * (1 - t)^(b - 1) } integrate(beta2, lower = 0, upper = 1, a = 2, b = 3) #&gt; 0.0833 with absolute error &lt; 9.3e-16 5.3.4 贝塞尔函数 besselI(x, nu, expon.scaled = FALSE) # 修正的第一类 besselK(x, nu, expon.scaled = FALSE) # 修正的第二类 besselJ(x, nu) # 第一类 besselY(x, nu) # 第二类 \\(\\nu\\) 贝塞尔函数的阶，可以是分数 expon.scaled 是否使用指数表示 nus &lt;- c(0:5, 10, 20) x &lt;- seq(0, 4, length.out = 501) plot(x, x, ylim = c(0, 6), ylab = &quot;&quot;, type = &quot;n&quot;, main = &quot;Bessel Functions I_nu(x)&quot;) for(nu in nus) lines(x, besselI(x, nu = nu), col = nu + 2) legend(0, 6, legend = paste(&quot;nu=&quot;, nus), col = nus + 2, lwd = 1) 5.4 统计分布 5.4.1 一元分布 三大抽样及其历史 5.4.2 多元分布 多元t分布函数 The multivariate \\(t\\) distribution (MVT) is given by \\[T(\\mathbf{a},\\mathbf{b},\\Sigma,\\nu)=\\frac{2^{1-\\frac{\\nu}{2}}}{\\Gamma(\\frac{\\nu}{2}) } \\int_{0}^{\\infty} s^{\\nu-1}e^{-\\frac{s^2}{2}} \\Phi(\\frac{s\\mathbf{a}}{\\sqrt{\\nu}},\\frac{s\\mathbf{b}}{\\sqrt{\\nu}},\\Sigma)ds\\] multivariate normal distribution function (MVN) \\[\\Phi(\\mathbf{a},\\mathbf{b},\\Sigma)=\\frac{1}{\\sqrt{|\\Sigma|(2\\pi)^m}} \\int_{a_1}^{b_1}\\!\\int_{a_2}^{b_2}\\!\\cdots\\!\\int_{a_m}^{b_m} e^{-\\frac{1}{2}x^\\top\\Sigma^{-1}x}dx\\] \\(x=(x_1,x_2,\\dots,x_m)^\\top,-\\infty \\le a_i \\le b_i \\le \\infty\\) for all \\(i\\) and \\(\\Sigma\\) is a positive semi-definite symmetric \\(m \\times m\\) matrix 多元\\(t\\)分布分位数计算 library(mvtnorm) library(matrixcalc) n &lt;- c(26, 24, 20, 33, 32) V &lt;- diag(1 / n) df &lt;- 130 C &lt;- matrix(c( 1, 1, 1, 0, 0, -1, 0, 0, 1, 0, 0, -1, 0, 0, 1, 0, 0, 0, -1, -1, 0, 0, -1, 0, 0 ), ncol = 5) cv &lt;- C %*% V %*% t(C) ## covariance matrix dv &lt;- t(1 / sqrt(diag(cv))) cr &lt;- cv * (t(dv) %*% dv) ## correlation matrix delta &lt;- rep(0, 5) Tn &lt;- qmvt(0.95, df = df, delta = delta, corr = cr, abseps = 0.0001, maxpts = 100000, tail = &quot;both&quot; ) Tn 计算多元正态分布的概率 sigma &lt;- read.csv(file = &quot;data/sigma.csv&quot;, header = F, sep = &quot;,&quot;) mat &lt;- matrix(0, nrow = nrow(sigma), ncol = ncol(sigma)) sigma &lt;- as.matrix(sigma) attributes(sigma) &lt;- attributes(mat) # str(sigma) # is.symmetric.matrix(sigma) # is.positive.definite(sigma) m &lt;- nrow(sigma) Fn &lt;- pmvnorm( lower = rep(-Inf, m), upper = rep(0, m), mean = rep(0, m), sigma = sigma ) Fn mvrnorm 函数来自 MASS 包，模拟多元正态分布的样本 参考文献 "],
["section-6.html", "第 6 章 数据操作 6.1 集合运算 6.2 正则匹配 6.3 排序 6.4 索引 6.5 分组 6.6 apply 6.7 合并 6.8 映射 6.9 拆分 6.10 数据库", " 第 6 章 数据操作 6.1 集合运算 6.2 正则匹配 字符串处理 Handling Strings with R Gaston Sanchez 著 正则表达式 is ervrywhere，is 高级/hacker’s skill 技能 正则表达式速查表 – Python3 Online regex tester and debugger Regular expression operations 以 CRAN 日志数据为例 R 包开发者 library(magrittr) gsub( &quot; &lt;([^&lt;&gt;]*)&gt;&quot;, &quot;&quot;, lapply(.packages(TRUE), maintainer) %&gt;% unlist() ) %&gt;% unique() %&gt;% sort() %&gt;% tail(10) #&gt; [1] &quot;Stefan Milton Bache&quot; &quot;Stefan Widgren&quot; &quot;Terry M Therneau&quot; #&gt; [4] &quot;Thomas Lumley&quot; &quot;Vincent Arel-Bundock&quot; &quot;William Revelle&quot; #&gt; [7] &quot;Winston Chang&quot; &quot;Yang Zhou&quot; &quot;Yihui Xie&quot; #&gt; [10] &quot;Yixuan Qiu&quot; # 网上有多少 R 包 pkg_repos &lt;- c(&quot;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&quot;,&quot;https://inla.r-inla-download.org/R/stable&quot;,&quot;http://r-forge.r-project.org/&quot;) pkg &lt;- utils::available.packages(repos = pkg_repos) pkg &lt;- as.data.frame(pkg, stringsAsFactors = FALSE) pkg$Package download.packages(&quot;Rbooks&quot;, destdir = &quot;~/&quot;,repos = &quot;http://r-forge.r-project.org/&quot;) Github 活动记录 https://github.com/jonocarroll/butteRfly # install.packages(&quot;devtools&quot;) devtools::install_github(&quot;jonocarroll/butteRfly&quot;) my_socials &lt;- collate_socials(user = c(&quot;jonocarroll&quot;, &quot;carroll_jono&quot;, 4168169), socials = c(&quot;GitHub&quot;, &quot;Twitter&quot;, &quot;StackOverflow&quot;)) 6.3 排序 6.3.1 order 6.3.2 sort 6.4 索引 6.4.1 which 向量和矩阵中的操作 6.4.2 [[ 6.5 分组 by with 和 within 6.6 apply 6.6.1 lapply 6.6.2 sapply 6.6.3 parallel 6.7 合并 6.7.1 aggregate 6.8 映射 6.8.1 Map 6.8.2 Reduce openxlsx 拆分、映射计算，合并 ## Load dependencies if (!require(&#39;openxlsx&#39;)) install.packages(&#39;openxlsx&#39;) library(&#39;openxlsx&#39;) ## Split data apart by a grouping variable; ## makes a named list of tables dat &lt;- split(mtcars, mtcars$cyl) dat ## Create a blank workbook wb &lt;- createWorkbook() ## Loop through the list of split tables as well as their names ## and add each one as a sheet to the workbook Map(function(data, name){ addWorksheet(wb, name) writeData(wb, name, data) }, dat, names(dat)) ## Save workbook to working directory saveWorkbook(wb, file = &quot;example.xlsx&quot;, overwrite = TRUE) 6.9 拆分 6.9.1 split 6.9.2 cut findInterval embed 6.10 数据库 RMariaDB: Implements a ‘DBI’-compliant interface to ‘MariaDB’ (https://mariadb.org/) and ‘MySQL’ (https://www.mysql.com/) databases. https://github.com/r-dbi/RMariaDB rio https://github.com/leeper/rio "],
["graphics.html", "第 7 章 基础图形 7.1 plot", " 第 7 章 基础图形 7.1 plot set.seed(2018) n &lt;- 2^16 x &lt;- runif(n,0,1) delta &lt;- 0.01 len &lt;- diff(c(0,which(x &lt; delta),n+1))-1 ylim &lt;- seq( 0, 1800, by = 300) xlim &lt;- seq( 0, 100, by = 20) p &lt;- hist(len[len &lt; 101], breaks = -1:100+0.5, plot = FALSE) par(mar = c(2,2,.5,.5)) plot(p, xlab = &#39;间距&#39;, ylab = &#39;频数&#39;, axes = FALSE, col = &quot;lightblue&quot;, border = &quot;white&quot;, main = &quot;&quot;) axis( 1, labels = xlim, at = xlim, las = 1) # x 轴 axis( 2, labels = ylim, at = ylim, las = 0) # y 轴 box(col=&quot;gray&quot;) # 添加线性回归线 xx &lt;- seq.int(from = 0, to = 100, by = 1) xy &lt;- p$counts options(digits = 2) fit &lt;- lm(xy~xx) abline(fit, col = &#39;red&#39;) 图 7.1: 游程直方图 b = coef(fit) # mtext(paste0( &quot;Y = &quot;, paste0(paste0(b[1], b[2]),&quot;x&quot;) ), side = 3, cex = 2) 还你一个清爽的世界，统计之都文章 漫谈条形图 data(NCI60, package = &quot;ISLR&quot;) # 加载数据 myData &lt;- sort(table(NCI60$labs), decreasing = TRUE) par(mar = c(2, 7, 1, 1)) barCenters &lt;- barplot(myData, col = &quot;lightblue&quot;, axes = FALSE, axisnames = FALSE, horiz = TRUE, border = &quot;white&quot; ) text( y = barCenters, x = par(&quot;usr&quot;)[3], adj = 1, labels = names(myData), xpd = TRUE ) axis(1, labels = seq(0, 9, by = 1), at = seq(0, 9, by = 1), las = 1, col = &quot;gray&quot;) 图 7.2: 条形图 plot 作为一个泛型函数，对于不同的输入数据类型，会自动匹配不同的绘图函数，默认的有 methods(plot) #&gt; [1] plot.acf* plot.data.frame* plot.decomposed.ts* #&gt; [4] plot.default plot.dendrogram* plot.density* #&gt; [7] plot.ecdf plot.factor* plot.formula* #&gt; [10] plot.function plot.hclust* plot.histogram* #&gt; [13] plot.HoltWinters* plot.isoreg* plot.lm* #&gt; [16] plot.medpolish* plot.mlm* plot.ppr* #&gt; [19] plot.prcomp* plot.princomp* plot.profile.nls* #&gt; [22] plot.raster* plot.spec* plot.stepfun #&gt; [25] plot.stl* plot.table* plot.ts #&gt; [28] plot.tskernel* plot.TukeyHSD* #&gt; see &#39;?methods&#39; for accessing help and source code op &lt;- par(mfrow = c(3, 2), mar = c(2, 2, .5, .5)) # 分类散点图 plot(Sepal.Length ~ Sepal.Width, data = iris, col = Species, pch = 16) legend(&quot;topright&quot;, legend = unique(iris$Species), box.col = &quot;gray&quot;, pch = 16, col = unique(iris$Species) ) box(col = &quot;gray&quot;) # 气泡图 plot(Volume ~ Height, data = trees, pch = 16, cex = Girth / 8, col = rev(terrain.colors(nrow(trees), alpha = .5)) ) box(col = &quot;gray&quot;) # 折线图 plot(AirPassengers, col = &quot;lightblue&quot;) box(col = &quot;gray&quot;) # 柱形图 set.seed(123456) barPois &lt;- table(stats::rpois(1000, lambda = 5)) plot(barPois, col = &quot;lightblue&quot;, type = &quot;h&quot;, lwd = 10, main = &quot;&quot;) box(col = &quot;gray&quot;) # 马赛克图 # par(mar=c(2,2,.5,.5)) plot(HairEyeColor, col = &quot;lightblue&quot;, border = &quot;white&quot;, main = &quot;&quot;) # box(col=&quot;gray&quot;) # 矩阵图 自带 layout plot(iris[, -5], col = iris$Species, pch = 16) 图 7.3: 丰富的方法 图 7.3: 丰富的方法 par(op) raster 图形 library(raster) #&gt; Loading required package: sp library(sp) library(spDataLarge) plot(elevation, asp = NA) 图 7.4: raster 图形 注意与 image 函数区别 # A prettier display of the volcano x &lt;- 10*(1:nrow(volcano)) y &lt;- 10*(1:ncol(volcano)) image(x, y, volcano, col = terrain.colors(100), axes = FALSE) contour(x, y, volcano, levels = seq(90, 200, by = 5), add = TRUE, col = &quot;peru&quot;) axis(1, at = seq(100, 800, by = 100)) axis(2, at = seq(100, 600, by = 100)) box() title(main = &quot;Maunga Whau Volcano&quot;, font.main = 4) 图 7.5: image 图形 残差图 # iris$Species 分三类 vec_mean &lt;- apply(iris[,-5],2,mean) vec_sd &lt;- apply(iris[,-5],2,sd) plot( seq(4) , vec_mean, ylim = range(c(vec_mean-vec_sd, vec_mean + vec_sd)), pch=19, xlab=&quot;Species&quot;, ylab=&quot;Mean +/- SD&quot;, main=&quot;Scatter plot with std.dev error bars&quot; ) arrows(seq(4), vec_mean-vec_sd, seq(4), vec_mean + vec_sd, length=0.05, angle=90, code=3) # seq( nlevels(iris$Species) ) "],
["ggplot.html", "第 8 章 高级图形", " 第 8 章 高级图形 Claus O. Wilke 新书：数据可视化基础 Fundamentals of Data Visualization 全 R/ggplot2 实现 ggplot2 有很多绘图函数 library(ggplot2) # packageDescription(&quot;ggplot2&quot;) grep(&#39;^(geom_)&#39;, ls(&#39;package:ggplot2&#39;), value = TRUE) #&gt; [1] &quot;geom_abline&quot; &quot;geom_area&quot; &quot;geom_bar&quot; #&gt; [4] &quot;geom_bin2d&quot; &quot;geom_blank&quot; &quot;geom_boxplot&quot; #&gt; [7] &quot;geom_col&quot; &quot;geom_contour&quot; &quot;geom_count&quot; #&gt; [10] &quot;geom_crossbar&quot; &quot;geom_curve&quot; &quot;geom_density&quot; #&gt; [13] &quot;geom_density_2d&quot; &quot;geom_density2d&quot; &quot;geom_dotplot&quot; #&gt; [16] &quot;geom_errorbar&quot; &quot;geom_errorbarh&quot; &quot;geom_freqpoly&quot; #&gt; [19] &quot;geom_hex&quot; &quot;geom_histogram&quot; &quot;geom_hline&quot; #&gt; [22] &quot;geom_jitter&quot; &quot;geom_label&quot; &quot;geom_line&quot; #&gt; [25] &quot;geom_linerange&quot; &quot;geom_map&quot; &quot;geom_path&quot; #&gt; [28] &quot;geom_point&quot; &quot;geom_pointrange&quot; &quot;geom_polygon&quot; #&gt; [31] &quot;geom_qq&quot; &quot;geom_qq_line&quot; &quot;geom_quantile&quot; #&gt; [34] &quot;geom_raster&quot; &quot;geom_rect&quot; &quot;geom_ribbon&quot; #&gt; [37] &quot;geom_rug&quot; &quot;geom_segment&quot; &quot;geom_sf&quot; #&gt; [40] &quot;geom_smooth&quot; &quot;geom_spoke&quot; &quot;geom_step&quot; #&gt; [43] &quot;geom_text&quot; &quot;geom_tile&quot; &quot;geom_violin&quot; #&gt; [46] &quot;geom_vline&quot; grep(&#39;^(stat_)&#39;, ls(&#39;package:ggplot2&#39;), value = TRUE) #&gt; [1] &quot;stat_bin&quot; &quot;stat_bin_2d&quot; &quot;stat_bin_hex&quot; #&gt; [4] &quot;stat_bin2d&quot; &quot;stat_binhex&quot; &quot;stat_boxplot&quot; #&gt; [7] &quot;stat_contour&quot; &quot;stat_count&quot; &quot;stat_density&quot; #&gt; [10] &quot;stat_density_2d&quot; &quot;stat_density2d&quot; &quot;stat_ecdf&quot; #&gt; [13] &quot;stat_ellipse&quot; &quot;stat_function&quot; &quot;stat_identity&quot; #&gt; [16] &quot;stat_qq&quot; &quot;stat_qq_line&quot; &quot;stat_quantile&quot; #&gt; [19] &quot;stat_sf&quot; &quot;stat_smooth&quot; &quot;stat_spoke&quot; #&gt; [22] &quot;stat_sum&quot; &quot;stat_summary&quot; &quot;stat_summary_2d&quot; #&gt; [25] &quot;stat_summary_bin&quot; &quot;stat_summary_hex&quot; &quot;stat_summary2d&quot; #&gt; [28] &quot;stat_unique&quot; &quot;stat_ydensity&quot; rattle 下载量时序图 library(cranlogs) library(ggthemes) pkgs_down &lt;- cran_downloads(package = &quot;rattle&quot;, from = Sys.Date() - 365 * 5, to = Sys.Date()) ggplot(pkgs_down, aes(x = date, y = count, colour = package)) + geom_line() + geom_point(size = 1.5) + scale_x_date(date_breaks = &quot;1 year&quot;, date_labels = &quot;%Y&quot;) + ylim(c(0, 1500)) + scale_colour_brewer(palette = &quot;Set1&quot;) + # scale_color_fivethirtyeight(&quot;&quot;) + # theme_fivethirtyeight() + labs( subtitle = paste(&quot;最近更新日期:&quot;, Sys.Date()), title = &quot;Rattle 最近5年每日下载量&quot;, caption = &quot; 数据源: http://cran-logs.rstudio.com/ &quot; ) + theme_minimal(base_size = 10.54, base_family = &quot;source-han-serif-cn&quot;) 给线条添加注释和标签，这个功能有时候比图例更加漂亮 # 出自 https://gist.github.com/EmilHvitfeldt/acb849a6135a21426c260850cf0f461b # Horizontal annotations with ggrepel and ggplot2 library(tidyverse) #&gt; ── Attaching packages ────────────────────────────────── tidyverse 1.2.1 ── #&gt; ✔ tibble 1.4.2 ✔ purrr 0.2.4 #&gt; ✔ tidyr 0.8.0 ✔ dplyr 0.7.4 #&gt; ✔ readr 1.1.1 ✔ stringr 1.3.1 #&gt; ✔ tibble 1.4.2 ✔ forcats 0.3.0 #&gt; ── Conflicts ───────────────────────────────────── tidyverse_conflicts() ── #&gt; ✖ dplyr::filter() masks stats::filter() #&gt; ✖ dplyr::lag() masks stats::lag() #&gt; ✖ dplyr::vars() masks ggplot2::vars() library(ggrepel) data &lt;- tibble( x = seq_len(100), y = cumsum(rnorm(100)) ) anno_data &lt;- data %&gt;% filter(x %% 25 == 10) %&gt;% mutate(text = &quot;text&quot;) data %&gt;% ggplot(aes(x, y)) + geom_line() + geom_label_repel(aes(label = text), data = anno_data, direction = &quot;y&quot;, nudge_y = c(-5, 5, 5, 5) ) + theme_minimal() 图 8.1: 添加标签 本节软件信息 devtools::session_info(&quot;ggplot2&quot;) #&gt; Session info ------------------------------------------------------------- #&gt; setting value #&gt; version R version 3.4.4 (2017-01-27) #&gt; system x86_64, linux-gnu #&gt; ui X11 #&gt; language (EN) #&gt; collate en_US.UTF-8 #&gt; tz UTC #&gt; date 2018-05-15 #&gt; Packages ----------------------------------------------------------------- #&gt; package * version date source #&gt; assertthat 0.2.0 2017-04-11 CRAN (R 3.3.3) #&gt; cli 1.0.0 2017-11-05 CRAN (R 3.4.2) #&gt; colorspace 1.3-2 2016-12-14 CRAN (R 3.4.0) #&gt; crayon 1.3.4 2017-09-16 CRAN (R 3.4.1) #&gt; dichromat 2.0-0 2013-01-24 CRAN (R 3.0.1) #&gt; digest 0.6.15 2018-01-28 CRAN (R 3.4.3) #&gt; ggplot2 * 2.2.1.9000 2018-05-15 Github (tidyverse/ggplot2@daba7ab) #&gt; glue 1.2.0 2017-10-29 CRAN (R 3.4.2) #&gt; graphics * 3.4.4 2018-03-15 local #&gt; grDevices * 3.4.4 2018-03-15 local #&gt; grid 3.4.4 2018-03-15 local #&gt; gtable 0.2.0 2016-02-26 CRAN (R 3.2.3) #&gt; labeling 0.3 2014-08-23 CRAN (R 3.1.1) #&gt; lattice 0.20-35 2017-03-25 CRAN (R 3.4.4) #&gt; lazyeval 0.2.1 2017-10-29 CRAN (R 3.4.2) #&gt; magrittr 1.5 2014-11-22 CRAN (R 3.1.2) #&gt; MASS 7.3-49 2018-02-23 CRAN (R 3.4.4) #&gt; Matrix 1.2-12 2017-11-30 CRAN (R 3.4.4) #&gt; methods * 3.4.4 2018-03-15 local #&gt; mgcv 1.8-23 2018-01-21 CRAN (R 3.4.4) #&gt; munsell 0.4.3 2016-02-13 CRAN (R 3.2.3) #&gt; nlme 3.1-131.1 2018-02-16 CRAN (R 3.4.4) #&gt; pillar 1.2.2 2018-04-26 CRAN (R 3.4.4) #&gt; plyr 1.8.4 2016-06-08 CRAN (R 3.4.0) #&gt; R6 2.2.2 2017-06-17 CRAN (R 3.4.0) #&gt; RColorBrewer 1.1-2 2014-12-07 CRAN (R 3.1.2) #&gt; Rcpp 0.12.16 2018-03-13 CRAN (R 3.4.4) #&gt; reshape2 1.4.3 2017-12-11 CRAN (R 3.4.3) #&gt; rlang 0.2.0 2018-02-20 CRAN (R 3.4.3) #&gt; scales 0.5.0 2017-08-24 CRAN (R 3.4.1) #&gt; stats * 3.4.4 2018-03-15 local #&gt; stringi 1.2.2 2018-05-02 CRAN (R 3.4.4) #&gt; stringr * 1.3.1 2018-05-10 CRAN (R 3.4.4) #&gt; tibble * 1.4.2 2018-01-22 CRAN (R 3.4.3) #&gt; tools 3.4.4 2018-03-15 local #&gt; utf8 1.1.3 2018-01-03 CRAN (R 3.4.3) #&gt; utils * 3.4.4 2018-03-15 local #&gt; viridisLite 0.3.0 2018-02-01 CRAN (R 3.4.3) #&gt; withr 2.1.2 2018-03-15 CRAN (R 3.4.4) "],
["section-9.html", "第 9 章 动态图形 9.1 ECharts 9.2 D3", " 第 9 章 动态图形 基于 JS 动态库的 R 包 leaflet (Cheng, Karambelkar, and Xie 2018)，ggvis ， rbokeh (Hafen and Continuum Analytics, Inc. 2016) 和 plotly (Sievert et al. 2018) ，我比较喜欢 highcharter (Kunst 2017)，美观高效，还活跃开发中。 library(&quot;highcharter&quot;) data(diamonds, mpg, package = &quot;ggplot2&quot;) hchart(mpg, &quot;scatter&quot;, hcaes(x = displ, y = hwy, group = class)) library(rbokeh) figure(width = 600, height = 400) %&gt;% ly_hist(eruptions, data = faithful, breaks = 40, freq = FALSE) %&gt;% ly_density(eruptions, data = faithful) library(plotly) plot_ly(z = ~volcano, type = &quot;surface&quot;) 9.1 ECharts 基于 ECharts 4 开发的 R 包 (Coene 2018) 和 (Wei, Xie, and Zhou 2016) # install.packages(&quot;devtools&quot;) devtools::install_github(&quot;JohnCoene/echarts4r&quot;) devtools::install_github(&#39;cosname/recharts&#39;) 9.2 D3 R Interface to D3 Visualizations (Luraschi and Allaire 2018) devtools::install_github(&quot;rstudio/r2d3&quot;) 参考文献 "],
["section-10.html", "第 10 章 绘图工具 10.1 截图 10.2 Inkscape 10.3 转化 10.4 优化 10.5 裁剪 10.6 接口", " 第 10 章 绘图工具 图片导入，导出，转化，批量转化 导入 SVG 格式的图片, rsvg (Ooms 2018b) 批量转化 svg 文件为 pdf 文件 library(rsvg) tmp &lt;- &quot;figure/Ink&quot; # svgs 存放目录 input_paths &lt;- paste0(tmp, &quot;/&quot;, list.files(tmp)) output_paths &lt;- paste0(&quot;figure/pdf&quot;, &quot;/&quot;, gsub(&quot;svg&quot;, &quot;pdf&quot;, list.files(tmp))) for (i in seq(length(list.files(tmp)))) { rsvg_pdf(input_paths[i], file = output_paths[i]) } pdftools (Ooms 2018a) 用于文本提取，渲染和转化 PDF 文档 magick 的简单使用，如插入 Inkscape 图标，如图10.1 图 10.1: Inkscape 图标 magick Bindings to ImageMagick: the most comprehensive open-source image processing library available. Supports many common formats (png, jpeg, tiff, pdf, etc) and manipulations (rotate, scale, crop, trim, flip, blur, etc). All operations are vectorized via the Magick++ STL meaning they operate either on a single frame or a series of frames for working with layers, collages, or animation. In RStudio images are automatically previewed when printed to the console, resulting in an interactive editing environment. The latest version of the package includes a native graphics device for creating in-memory graphics or drawing onto images using pixel coordinates. 10.1 截图 webshot https://github.com/wch/webshot # 截图 install.packages(&quot;webshot&quot;) webshot::install_phantomjs() # 截网页 library(webshot) webshot(&quot;https://www.r-project.org/&quot;, &quot;r.png&quot;) webshot(&quot;https://www.r-project.org/&quot;, &quot;r.pdf&quot;) # Can also output to PDF # 截文档 rmdshot(&quot;document.rmd&quot;, &quot;document.png&quot;) # 截特定大小 GraphicsMagick (recommended) or ImageMagick installed # Can specify pixel dimensions for resize() webshot(&quot;https://www.r-project.org/&quot;, &quot;r-small.png&quot;) %&gt;% resize(&quot;400x&quot;) %&gt;% shrink() 10.2 Inkscape Inkscape is an open source drawing tool with capabilities similar to Illustrator, Freehand, and CorelDraw that uses the W3C standard scalable vector graphics format (SVG). Some supported SVG features include basic shapes, paths, text, markers, clones, alpha blending, transforms, gradients, and grouping. In addition, Inkscape supports Creative Commons meta-data, node-editing, layers, complex path operations, text-on-path, and SVG XML editing. It also imports several formats like EPS, Postscript, JPEG, PNG, BMP, and TIFF and exports PNG as well as multiple vector-based formats. Inkscape’s main motivations are to provide the Open Source community with a fully W3C compliant XML, SVG, and CSS2 drawing tool emphasizing a lightweight core with powerful features added as extensions, and the establishment of a friendly, open, community-oriented development processes. Inkscape5 是替代 Adobe Illustrator（简称 AI） 最佳工具，没有之一。开源免费，功能齐全，更新快，跨平台。尤其不用面临如图10.2所示的兼容性问题，说白了，就是厂家在不停地刷版本号，要用户掏钱升级，我早年间也是 Adobe 的忠实粉丝，通过校园先锋以学生身份买了好几套产品，后来看透了这一切，又找到了开源的 Inkscape ，现在我没有理由去升级 AI 了，我的电脑现在装的还都是 CS6 系列。 图 10.2: 兼容性错误 最后欣赏来自官网的几个作品6 图 10.3: 作品欣赏 图 10.3: 作品欣赏 10.3 转化 首先安装 ImageMagick 软件包中的 covert 程序 asy -f jpg test.asy 高质量大图，给定像素 convert -geometry 1000x3000 example.eps example.png 指定分辨率 convert -geometry 1000x3000 -density 300 -units PixelsPerInch example.eps example.png 这样不改变图像的像素数，只是给出一个每个像素应该显示多大的提示。 10.4 优化 optipng 是一个非常好的图片压缩、优化工具 现在，我们设置 chunk 选项 optipng 为非空(non-NULL)的值，例如，'' 去激活这个 hook （益辉称之为钩子，这里勾的是 optipng 这个图片优化工具） library(ggplot2) set.seed(123) qplot(rnorm(1e3), rnorm(1e3)) 图 10.4: 优化 同一幅图，但是没有优化 library(ggplot2) set.seed(123) qplot(rnorm(1e3), rnorm(1e3)) 图 10.5: 没有优化 同一幅图，但是使用最高级别的优化 (传递 -o7 参数给 optipng): library(ggplot2) set.seed(123) qplot(rnorm(1e3), rnorm(1e3)) 图 10.6: 最强优化 10.5 裁剪 pdfcrop 可将 PDF 图片中留白的部分裁去，再也不用纠结 par 了 图 10.7: pdfcrop 裁剪白边 10.6 接口 R提供了丰富的图形接口，包括 Tcl/Tk , Gtk, Shiny 等。John Chamber 在书 《Extending R》详细介绍了这一切 rattle/RGtk2: R Bindings for Gtk 2.8.0 and Above http://www.ggobi.org/rgtk2/ Rcmdr: tcl/tk shiny: radiant https://github.com/radiant-rstats/radiant install.packages(&quot;radiant&quot;, repos = &quot;https://radiant-rstats.github.io/minicran/&quot;) 参考文献 "],
["color.html", "第 11 章 配色 11.1 调色板 11.2 颜色空间", " 第 11 章 配色 君子爱色，取之有道：有些人功力深厚，黑白灰几乎打遍天下无敌手，如科波拉执导的《教父》、沃卓斯基执导的《黑客帝国》等等，但我还是要说，好色乃人之本性也，花花世界，岂能都是法印眼中的白骨！再说《红楼梦》里，芍药丛中，桃花树下，滴翠亭边，栊翠庵里，处处都是湘云、黛玉、宝钗、妙玉留下的诗歌。 黑西装、黑领带和白衬衫，让人一下子想到了电影《黑客帝国》，构建了整幅画轴，黑领带换黑领结和红玫瑰，转而又想到电影《教父》的主角维托·唐·科莱昂，黑白灰就占了电影的主色调。这么素的颜色怎么就能这么丰富呢？这就是配色的技艺了！ 11.1 调色板 首先选择一组合适的颜色，比如从桃色到梨色，选择6种颜色，以此为基础，可以借助grDevices::colorRampPalette函数扩充至想要的数目 # Colors from https://github.com/johannesbjork/LaCroixColoR color_vec &lt;- c(&quot;#FF3200&quot;, &quot;#E9A17C&quot;, &quot;#E9E4A6&quot;, &quot;#1BB6AF&quot;, &quot;#0076BB&quot;, &quot;#172869&quot;) n &lt;- 20 more_colors &lt;- (grDevices::colorRampPalette(color_vec))(n) 这里用 graphics::rect 函数展示这组颜色 # 代码来自 ?colorspace::rainbow_hcl pal &lt;- function(colorname, border = &quot;light gray&quot;, ...) { n &lt;- length(colorname) plot(0, 0, type = &quot;n&quot;, xlim = c(0, 1), ylim = c(0, 1), axes = FALSE, ... ) rect(0:(n - 1) / n, 0, 1:n / n, 1, col = colorname, border = border) } par(mar = rep(0, 4)) pal(more_colors, xlab = &quot;Colors from Peach to Pear&quot;, ylab = &quot;&quot;) 图 7.4: 桃色至梨色的渐变 早些时候我在统计之都论坛上发帖 – R语言绘图用调色板大全 https://d.cosx.org/d/419378-r 阐述色理 HCL RGB CMYK Adobe RGB sRGB P3广色域 2K 4K 5K 视网膜屏 普清 高清 超高清 全高清 显示器 打印机 照相机 为什么需要这么多颜色模式 知道颜色模式及其之间的转化 颜色空间及其区别 HCL and HSV color spaces 基于网页、人眼、打印机使用不同的颜色模式为何 哪里可以获取颜色 grDevices (R Core Team 2017) colorspace (Ihaka et al. 2016) RColorBrewer (Neuwirth 2014) 基本够用 取之有道 拿人家的颜色 一定要记得引用啊，我这里要是还有哪里没有引用到的一定要提出来 18个R包 所谓降龙十八掌 要想降住色魔，非得十八掌不可 11.2 颜色空间 确定一种颜色，我们需要知道 色相 饱和度 明度 颜色的三个属性， 11.2.1 RGB 红(red)、绿(green)、蓝(blue)是三原色 rgb(red, green, blue, alpha, names = NULL, maxColorValue = 1) 函数参数说明： red, blue, green, alpha 取值范围[0,M]，M 是 maxColorValue names 字符向量，给这组颜色值取名 maxColorValue 红，绿，蓝三色范围的最大值 The colour specification refers to the standard sRGB colorspace (IEC standard 61966). rgb 产生一种颜色，如 rgb(255, 0, 0, maxColorValue = 255) 的颜色是 &quot;#FF0000&quot; ，这是一串16进制数，每两个一组，那么一组有 \\(16^2 = 256\\) 种组合，整个一串有 \\(256^3 = 16777216\\) 种组合，这就是RGB表达的所有颜色。用色轮示意，如图 11.1 par(mar = rep(0,4)) pie(rep(1, times = 255), labels = &quot;&quot;, col = rainbow(255), border = FALSE) 图 11.1: RGB 色轮 colorRampPalette 自制调色板 op &lt;- par(mfrow = c(3, 1), mar = c(0.1, 0.1, 0.5, 0.1), xaxs = &quot;i&quot;, yaxs = &quot;i&quot;) n &lt;- 1000 mycolors &lt;- colorRampPalette(c(&quot;blue&quot;, &quot;orangeRed&quot;))(n) barplot(rep(1, times = n), col = mycolors, border = mycolors, axes = FALSE) mycolors &lt;- colorRampPalette(c(&quot;darkgreen&quot;, &quot;yellow&quot;, &quot;orangered&quot;))(n) barplot(rep(1, times = n), col = mycolors, border = mycolors, axes = FALSE) mycolors &lt;- colorRampPalette(c(&quot;blue&quot;, &quot;white&quot;, &quot;orangered&quot;), bias = 1.2)(n) barplot(rep(1, times = n), col = mycolors, border = mycolors, axes = FALSE) 图 11.2: colorRampPalette自制调色板 11.2.2 HSL 色相饱和度亮度 hue–saturation–luminance (HSL) 11.2.3 HSV Create a vector of colors from vectors specifying hue, saturation and value. 色相饱和度值 hsv(h = 1, s = 1, v = 1, alpha) This function creates a vector of colors corresponding to the given values in HSV space. rgb and rgb2hsv for RGB to HSV conversion; hsv函数通过设置色调、饱和度和亮度获得颜色，三个值都是0-1的相对量 par(mfcol = c(11, 121), mar = c(0, 0, 0, 0), xaxs = &quot;i&quot;, yaxs = &quot;i&quot;) x &lt;- seq(0, 10) / 10 ndx &lt;- expand.grid(x, x, x) mycolor &lt;- hsv(ndx[, 3], ndx[, 2], ndx[, 1]) for (i in 1:nrow(ndx)) { barplot(1, col = mycolor[i], border = mycolor[i], axes = FALSE) } 图 11.3: 色相、饱和度和亮度 RGB HSV HSL 都是不连续的颜色空间，缺点 11.2.4 HCL 基于感知的颜色空间替代RGB颜色空间 通过指定色相(hue)，色度(chroma)和亮度(luminance/lightness)，创建一组（种）颜色 hcl(h = 0, c = 35, l = 85, alpha, fixup = TRUE) 函数参数说明： h 颜色的色调，取值范围为[0,360]，0、120、240分别对应红色、绿色、蓝色 c 颜色的色度，其上界取决于色调和亮度 l 颜色的亮度，取值范围[0,100]，给定色调和色度，只有一部分子集可用 alpha 透明度，取值范围[0,1]，0 和1分别表示透明和不透明 This function corresponds to polar coordinates in the CIE-LUV color space 11.2.5 CMYK 印刷三原色：青 (cyan)、品红 (magenta)、黄 (yellow) 颜色模式转化 col2rgb 、rgb2hsv 和 rgb 函数 (R Core Team 2017) hex2RGB 函数 (Ihaka et al. 2016) col2hcl函数 (Wickham 2017) col2HSV (Sanchez 2013) col2hex (Sumner 2016) 这里应该有个思维导图 col2rgb(&quot;lightblue&quot;) # color to RGB #&gt; [,1] #&gt; red 173 #&gt; green 216 #&gt; blue 230 scales::col2hcl(&quot;lightblue&quot;) # color to HCL #&gt; [1] &quot;#ADD8E6FF&quot; palr::col2hex(&quot;lightblue&quot;) # color to HEX #&gt; [1] &quot;#ADD8E6FF&quot; colortools::col2HSV(&quot;lightblue&quot;) # color to HSV #&gt; [1] &quot;#ADD8E6&quot; rgb(173,216,230,maxColorValue = 255) # RGB to HEX #&gt; [1] &quot;#ADD8E6&quot; colorspace::hex2RGB(&quot;#ADD8E6&quot;) # HEX to RGB #&gt; R G B #&gt; [1,] 0.678 0.847 0.902 rgb(.678,.847,.902,maxColorValue = 1) # RGB to HEX #&gt; [1] &quot;#ADD8E6&quot; rgb2hsv(173,216,230,maxColorValue = 255) # RGB to HSV #&gt; [,1] #&gt; h 0.541 #&gt; s 0.248 #&gt; v 0.902 选色为什么这么难 op &lt;- par(mar = c(1, 2, 1, 0), mfrow = c(3, 2)) set.seed(1234) barplot(sample(seq(8), 8, replace = FALSE), col = palette(), border = &quot;white&quot;) set.seed(1234) barplot(sample(seq(8), 8, replace = FALSE), col = heat.colors(8), border = &quot;white&quot;) set.seed(1234) barplot(sample(seq(8), 8, replace = FALSE), col = gray.colors(8), border = &quot;white&quot;) set.seed(1234) barplot(sample(seq(8), 8, replace = FALSE), col = &quot;lightblue&quot;, border = &quot;white&quot;) barplot(sample(seq(8), 8, replace = FALSE), col = colorspace::sequential_hcl(8), border = &quot;white&quot;) barplot(sample(seq(8), 8, replace = FALSE), col = colorspace::diverge_hcl(8, h = c(130, 43), c = 100, l = c(70, 90)), border = &quot;white&quot; ) 图 11.4: 源起 par(op) 色相与阴影相比是无关紧要的，色相对于标记和分类很有用，但表示（精细的）空间数据或形状的效果较差。颜色是改善图形的好工具，但糟糕的配色方案 (color schemes) 可能会导致比灰度调色板更差的效果。(Stauffer et al. 2009) 黑、白、灰，看似有三种颜色，其实只有一种颜色，黑和白只是灰色的两极，那么如何设置灰色梯度，使得人眼比较好区分它们呢？这样获得的调色板适用于什么样的绘图环境呢？ R预置的灰色有224种，挑出其中的调色板 grep( &quot;^gr(a|e)y&quot; , grep(&quot;gr(a|e)y&quot; , colors() ,value = TRUE),value = TRUE,invert = TRUE) #&gt; [1] &quot;darkgray&quot; &quot;darkgrey&quot; &quot;darkslategray&quot; &quot;darkslategray1&quot; #&gt; [5] &quot;darkslategray2&quot; &quot;darkslategray3&quot; &quot;darkslategray4&quot; &quot;darkslategrey&quot; #&gt; [9] &quot;dimgray&quot; &quot;dimgrey&quot; &quot;lightgray&quot; &quot;lightgrey&quot; #&gt; [13] &quot;lightslategray&quot; &quot;lightslategrey&quot; &quot;slategray&quot; &quot;slategray1&quot; #&gt; [17] &quot;slategray2&quot; &quot;slategray3&quot; &quot;slategray4&quot; &quot;slategrey&quot; gray_colors &lt;- paste0(rep(c(&quot;slategray&quot;, &quot;darkslategray&quot;), each = 4), seq(4)) op &lt;- par(mar = c(0, 0, 3, 0)) pal(gray_colors, main = toString(gray_colors), cex.main = .9) 图 11.5: 灰度调色板 par(op) gray 与 grey 是一样的，类似 color 和 colour 的关系，可能是美式和英式的差别，且看 all.equal( col2rgb( paste0(&quot;gray&quot;,seq(100) ) ), col2rgb( paste0( &quot;grey&quot;, seq(100) ) ) ) #&gt; [1] TRUE gray100 代表白色，gray0 代表黑色，提取灰色调色板，去掉首尾部分是必要的 op &lt;- par(mfrow = c(2,1), mar=c(0,0,2,0)) n &lt;- 10 # 提取 n 种灰色 pal(paste0(&quot;gray&quot;, round( seq( from = 29, to = 89, length.out = n ) ) ), main = &quot;custom color palette&quot;) pal(gray.colors(10, start = .3, end = .9), main = &quot;gray.colors function&quot;) 图 11.6: 提取10种灰色做调色板 par(op) 比较 viridis 和 Spectral 两块调色板，如图 11.7 所示，可见 Spectral 的可识别性高些 dat &lt;- as.data.frame(cbind(rep(1948 + seq(12), each = 12), rep(seq(12), 12), AirPassengers)) colnames(dat) &lt;- c(&quot;year&quot;, &quot;month&quot;, &quot;passengers&quot;) library(ggplot2) library(colormap) library(gridExtra) viridis &lt;- ggplot(data = dat, aes(as.factor(year), as.factor(month))) + geom_point(pch = 15, size = 8, aes(color = passengers)) + scale_color_colormap(colormap = colormaps$viridis) + labs(x = &quot;Year&quot;, y = &quot;Month&quot;, colour = &quot;Passengers&quot;) + theme_minimal() Spectral &lt;- ggplot(data = dat, aes(as.factor(year), as.factor(month))) + geom_point(aes(colour = passengers), pch = 15, size = 8) + scale_colour_distiller(palette = &quot;Spectral&quot;) + labs(x = &quot;Year&quot;, y = &quot;Month&quot;, colour = &quot;Passengers&quot;) + theme_minimal() grid.arrange(viridis, Spectral, ncol = 2) 图 11.7: viridis 和 Spectral对比 再举栗子，图11.8是正负例对比，其中好在哪里呢？这张图要表达美国黄石国家公园的老忠实泉间歇喷发的时间规律，那么好的标准就是层次分明，以突出不同颜色之间的时间差异。这个差异，还要看起来不那么费眼睛，越一目了然越好。 erupt &lt;- ggplot(faithfuld, aes(waiting, eruptions, fill = density)) + geom_raster() + scale_x_continuous(NULL, expand = c(0, 0)) + scale_y_continuous(NULL, expand = c(0, 0)) + theme(legend.position = &quot;none&quot;) erupt1 &lt;- erupt + scale_fill_gradientn(colours = gray.colors(7)) erupt2 &lt;- erupt + scale_fill_distiller(palette = &quot;Spectral&quot;) erupt3 &lt;- erupt + scale_fill_gradientn(colours = terrain.colors(7)) erupt4 &lt;- erupt + scale_fill_colormap(colormap = colormaps$RdBu) grid.arrange(erupt1, erupt2, erupt3, erupt4, ncol = 2) 图 11.8: 美国黄石国家公园的老忠实泉 RColorBrewer 包 提供了有序 (Sequential) 、定性 (Qualitative) 和发散 (Diverging) 三类调色板，一般来讲，分别适用于连续或有序分类变量、无序分类变量、两类分层对比变量的绘图。再加上强大的 ggplot2 包内置的对颜色处理的函数，如 scale_alpha_* 、 scale_colour_* 和 scale_fill_* 等，详见： ls(&quot;package:ggplot2&quot;,pattern = &quot;scale_col(ou|o)r_&quot;) #&gt; [1] &quot;scale_color_brewer&quot; &quot;scale_color_continuous&quot; #&gt; [3] &quot;scale_color_discrete&quot; &quot;scale_color_distiller&quot; #&gt; [5] &quot;scale_color_gradient&quot; &quot;scale_color_gradient2&quot; #&gt; [7] &quot;scale_color_gradientn&quot; &quot;scale_color_grey&quot; #&gt; [9] &quot;scale_color_hue&quot; &quot;scale_color_identity&quot; #&gt; [11] &quot;scale_color_manual&quot; &quot;scale_color_viridis_c&quot; #&gt; [13] &quot;scale_color_viridis_d&quot; &quot;scale_colour_brewer&quot; #&gt; [15] &quot;scale_colour_continuous&quot; &quot;scale_colour_date&quot; #&gt; [17] &quot;scale_colour_datetime&quot; &quot;scale_colour_discrete&quot; #&gt; [19] &quot;scale_colour_distiller&quot; &quot;scale_colour_gradient&quot; #&gt; [21] &quot;scale_colour_gradient2&quot; &quot;scale_colour_gradientn&quot; #&gt; [23] &quot;scale_colour_grey&quot; &quot;scale_colour_hue&quot; #&gt; [25] &quot;scale_colour_identity&quot; &quot;scale_colour_manual&quot; #&gt; [27] &quot;scale_colour_ordinal&quot; &quot;scale_colour_viridis_c&quot; #&gt; [29] &quot;scale_colour_viridis_d&quot; ls(&quot;package:ggplot2&quot;,pattern = &quot;scale_fill_&quot;) #&gt; [1] &quot;scale_fill_brewer&quot; &quot;scale_fill_continuous&quot; #&gt; [3] &quot;scale_fill_date&quot; &quot;scale_fill_datetime&quot; #&gt; [5] &quot;scale_fill_discrete&quot; &quot;scale_fill_distiller&quot; #&gt; [7] &quot;scale_fill_gradient&quot; &quot;scale_fill_gradient2&quot; #&gt; [9] &quot;scale_fill_gradientn&quot; &quot;scale_fill_grey&quot; #&gt; [11] &quot;scale_fill_hue&quot; &quot;scale_fill_identity&quot; #&gt; [13] &quot;scale_fill_manual&quot; &quot;scale_fill_ordinal&quot; #&gt; [15] &quot;scale_fill_viridis_c&quot; &quot;scale_fill_viridis_d&quot; 除之前提到的 grDevices 包(R Core Team 2017) 、colorspace 包 (Ihaka et al. 2016)和 RColorBrewer 包 (Neuwirth 2014) 之外，此处还收录 yarrr 包(Phillips 2017) 、dichromat 包(Lumley 2013) 、colormap 包(Karambelkar 2016)、viridis 包(Garnier 2018)、pals 包(Wright 2018) 、ColorPalette 包(Ambroselli 2015)、colorRamps包 (Keitt 2012)、colortools包(Sanchez 2013) ，此外还有 palr 包(Sumner 2016) 就不一一收录了 # 代码来自 ?palettes demo.pal &lt;- function(n, border = if (n &lt; 32) &quot;light gray&quot; else NA, main = paste(&quot;color palettes: alpha = 1, n=&quot;, n), ch.col = c(&quot;rainbow(n, start=.7, end=.1)&quot;, &quot;heat.colors(n)&quot;, &quot;terrain.colors(n)&quot;, &quot;topo.colors(n)&quot;, &quot;cm.colors(n)&quot;,&quot;gray.colors(n, start = 0.3, end = 0.9)&quot;)) { nt &lt;- length(ch.col) i &lt;- 1:n; j &lt;- n / nt; d &lt;- j/6; dy &lt;- 2*d plot(i, i+d, type = &quot;n&quot;, axes = FALSE, ylab = &quot;&quot;,xlab = &quot;&quot;, main = main) for (k in 1:nt) { rect(i-.5, (k-1)*j+ dy, i+.4, k*j, col = eval(parse(text = ch.col[k])), border = border) text(2*j, k * j + dy/4, ch.col[k]) } } n &lt;- if(.Device == &quot;postscript&quot;) 64 else 16 # Since for screen, larger n may give color allocation problem op &lt;- par(mar=c(0,0,2,0)) demo.pal(n) 图 11.9: grDevices调色板1 par(op) op &lt;- par(mfrow =c(33,1),mar=c(0,0,.8,0)) for( i in seq(32)) { pal( colors()[ (1+20*(i-1)) : (20*i) ] ,main = paste(1+20*(i-1),&quot;to&quot;, 20*i)) } pal( colors()[ 641 : 657 ], main = &quot;641 to 657&quot;) 图 11.10: grDevices调色板2 par(op) library(ColorPalette) op &lt;- par(mfrow=c(4,1),mar=c(0,0,2,0)) pal(generateMonochromaticColors(&quot;lightblue&quot;, 16),main = &quot;generateMonochromaticColors&quot;) pal(complementColors(&quot;lightblue&quot;, 16),main = &quot;complementColors&quot;) pal(tetradicColors(&quot;lightblue&quot;,16),main = &quot;tetradicColors&quot;) pal(triadicColors(&quot;lightblue&quot;,16), main = &quot;triadicColors&quot;) 图 11.11: ColorPalette调色板 par(op) library(colorRamps) op &lt;- par(mfrow=c(6,1),mar=c(0,0,2,0)) n &lt;- 16 pal(matlab.like(n),main = &quot;matlab.like&quot;) pal(matlab.like2(n),main = &quot;matlab.like2&quot;) pal(blue2green2red(n),main = &quot;blue2green2red&quot;) pal(primary.colors(n), main = &quot;primary.colors&quot;) pal(ygobb(n), main = &quot;ygobb&quot;) pal(rgb.tables(n), main = &quot;rgb.tables&quot;) 图 11.12: colorRamps调色板 par(op) library(viridisLite) n &lt;- 16 op &lt;- par(mfrow=c(4,1),mar=c(0,0,2,0)) pal(magma(n, alpha = 1, begin = 0, end = 1)) pal(inferno(n, alpha = 1, begin = 0, end = 1)) pal(plasma(n, alpha = 1, begin = 0, end = 1)) pal(viridis(n, alpha = 1, begin = 0, end = 1)) 图 11.13: viridis调色板 par(op) op &lt;- par(mfrow=c(2,1),mar=c(0,3,2,0)) library(pals) pals::pal.bands(coolwarm, parula, ocean.haline, cubicl, kovesi.rainbow, ocean.phase, brewer.paired(12), stepped, main=&quot;Colormap suggestions&quot;) # Qualtitative pals::pal.bands(brewer.accent(8), brewer.dark2(8), brewer.paired(12), brewer.pastel1(9), brewer.pastel2(8), brewer.set1(9), brewer.set2(8), brewer.set3(10), labels=c(&quot;brewer.accent&quot;, &quot;brewer.dark2&quot;, &quot;brewer.paired&quot;, &quot;brewer.pastel1&quot;, &quot;brewer.pastel2&quot;, &quot;brewer.set1&quot;, &quot;brewer.set2&quot;, &quot;brewer.set3&quot;), main=&quot;Brewer qualitative&quot;) par(op) op &lt;- par(mfrow=c(2,1),mar=c(0,3,2,0)) # Sequential pals::pal.bands(brewer.blues, brewer.bugn, brewer.bupu, brewer.gnbu, brewer.greens, brewer.greys, brewer.oranges, brewer.orrd, brewer.pubu, brewer.pubugn, brewer.purd, brewer.purples, brewer.rdpu, brewer.reds, brewer.ylgn, brewer.ylgnbu, brewer.ylorbr, brewer.ylorrd, main=&quot;Brewer sequential&quot;) # Diverging pals::pal.bands(brewer.brbg, brewer.piyg, brewer.prgn, brewer.puor, brewer.rdbu, brewer.rdgy, brewer.rdylbu, brewer.rdylgn, brewer.spectral, main=&quot;Brewer diverging&quot;) par(op) colortools::pals() 图 11.14: colortools调色板1 colortools::wheel(colortools::pals(&quot;fish&quot;)[1], bg = &quot;white&quot;) 图 11.15: colortools调色板2 library(colorspace) ## a few useful diverging HCL palettes op &lt;- par(mar = c(0,0,2,0), mfrow = c(16, 2)) pal(diverge_hcl(16), main = &quot;diverging HCL palettes&quot;) pal(diverge_hcl(16, h = c(246, 40), c = 96, l = c(65, 90))) pal(diverge_hcl(16, h = c(130, 43), c = 100, l = c(70, 90))) pal(diverge_hcl(16, h = c(180, 70), c = 70, l = c(90, 95))) pal(diverge_hcl(16, h = c(180, 330), c = 59, l = c(75, 95))) pal(diverge_hcl(16, h = c(128, 330), c = 98, l = c(65, 90))) pal(diverge_hcl(16, h = c(255, 330), l = c(40, 90))) pal(diverge_hcl(16, c = 100, l = c(50, 90), power = 1)) ## sequential palettes pal(sequential_hcl(16), main= &quot;sequential palettes&quot;) pal(heat_hcl(16, h = c(0, -100), l = c(75, 40), c = c(40, 80), power = 1)) pal(terrain_hcl(16, c = c(65, 0), l = c(45, 95), power = c(1/3, 1.5))) pal(heat_hcl(16, c = c(80, 30), l = c(30, 90), power = c(1/5, 1.5))) ## compare base and colorspace palettes ## (in color and desaturated) ## diverging red-blue colors pal(diverge_hsv(16), main = &quot;diverging red-blue colors&quot;) pal(diverge_hcl(16, c = 100, l = c(50, 90))) pal(desaturate(diverge_hsv(16))) pal(desaturate(diverge_hcl(16, c = 100, l = c(50, 90)))) ## diverging cyan-magenta colors pal(cm.colors(16), main = &quot;diverging cyan-magenta colors&quot;) pal(diverge_hcl(16, h = c(180, 330), c = 59, l = c(75, 95))) pal(desaturate(cm.colors(16))) pal(desaturate(diverge_hcl(16, h = c(180, 330), c = 59, l = c(75, 95)))) ## heat colors pal(heat.colors(16), main = &quot;heat colors&quot;) pal(heat_hcl(16)) pal(desaturate(heat.colors(16))) pal(desaturate(heat_hcl(16))) ## terrain colors pal(terrain.colors(16), main = &quot;terrain colors&quot;) pal(terrain_hcl(16)) pal(desaturate(terrain.colors(16))) pal(desaturate(terrain_hcl(16))) pal(rainbow_hcl(16, start = 30, end = 300), main = &quot;dynamic&quot;) pal(rainbow_hcl(16, start = 60, end = 240), main = &quot;harmonic&quot;) pal(rainbow_hcl(16, start = 270, end = 150), main = &quot;cold&quot;) pal(rainbow_hcl(16, start = 90, end = -30), main = &quot;warm&quot;) 图 11.16: colorspace调色板 par(op) op &lt;- par(mar=c(0,4,0,0)) RColorBrewer::display.brewer.all() 图 11.17: RColorBrewer调色板 par(op) yarrr::piratepal(palette = &quot;all&quot;) 图 11.18: yarrr调色板 library(dichromat) op &lt;- par(mar=c(0,0,2,0),mfrow = c(9,2)) for(i in seq(17)){ pal(colorschemes[[i]], main = names(colorschemes)[i]) } par(op) 图 11.19: dichromat调色板适用于色盲人群 library(colormap) color_map &lt;- function(colorname, border = &quot;light gray&quot;){ col &lt;- colormap_pal(colormap=colorname)(25) n &lt;- length(col) plot(0, 0, type=&quot;n&quot;, xlim = c(0, 1), ylim = c(0, 1), axes = FALSE, xlab = &quot;&quot;, ylab = &quot;&quot;) rect(0:(n-1)/n, 0, 1:n/n, 1, col = col, border = border) text(.5,.5,labels = colorname) } op &lt;- par(mfrow = c(22,2),mar = c(0, 0, 1, 0)) invisible( lapply(unlist(colormaps),color_map) ) 图 11.20: colormap调色板 par(op) 参考文献 "],
["fonts.html", "第 12 章 字体 12.1 CJK 字体 12.2 showtext 12.3 xkcd 12.4 fontcm 12.5 tikzDevice 12.6 TikZ 和 PGF", " 第 12 章 字体 12.1 CJK 字体 windows 下，支持 pdf，cairo_pdf 和 svg 设备，如 cairo_pdf(file = &quot;cjk.pdf&quot;,width=3,height=1) library(grid) grid.text(&quot;\\u4F60\\u597D&quot;, y = 2 / 3, gp = gpar(fontfamily = &quot;CNS1&quot;) ) grid.text( &quot;is &#39;hello&#39; in (Traditional) Chinese&quot;, y = 1 / 3 ) 图 12.1: CJK 字体支持 参考文献 https://cran.r-project.org/doc/Rnews/Rnews_2006-2.pdf Non-Standard Fonts in PostScript and PDF Graphics 一节 grDevices 包提供了如下函数，用于 postscript 和 pdf 图形设备，嵌入字体借助了 Ghostscript 其下载地址 https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs923/gs923w64.exe 以及 PDF 阅读器 MuPDF https://www.mupdf.com/ postscriptFonts(...) pdfFonts(...) embedFonts 字体设置包括自定义中文字体、英文字体和数学公式。 启用showtext 包处理中文，在网页版文档中，png 图片中的字体会变很小 12.2 showtext showtext 包(Qiu 2015)可以调用系统字体，图12.2使用5号思源宋体，英文和数字使用 serif 字体。详细的使用文档可以看 showtext 的开发页面 library(ggplot2) ggplot(iris, aes(Sepal.Length, Sepal.Width)) + geom_point(aes(colour = Species)) + scale_colour_brewer(palette = &quot;Set1&quot;) + labs( title = &quot;鸢尾花数据的散点图&quot;, x = &quot;萼片长度&quot;, y = &quot;萼片宽度&quot;, colour = &quot;鸢尾花类别&quot; ) + theme_minimal(base_size = 10.54, base_family = &quot;source-han-serif-cn&quot;) + theme( legend.text = element_text(family = &quot;serif&quot;, size = 10.54), axis.text = element_text(family = &quot;serif&quot;, size = 10.54) ) 图 12.2: showtext包处理图里的中文 用 ggplot2 画个简单地图，地图数据在 mapdata 包 (Richard A. Becker and Ray Brownrigg. 2018)，如图 12.3 所示 library(maps) library(mapdata) FijiMap &lt;- map_data(&quot;worldHires&quot;, region = &quot;Fiji&quot;) ggplot(FijiMap, aes(x = long, y = lat)) + geom_map(map = FijiMap, aes(map_id = region), size = .2) + geom_point(data = quakes, aes(x = long, y = lat, colour = mag), pch = 16) + xlim(160, 195) + scale_colour_distiller(palette = &quot;Spectral&quot;) + scale_y_continuous(breaks = (-18:18) * 5) + coord_map(&quot;ortho&quot;, orientation = c(-10, 180, 0)) + labs(colour = &quot;震级&quot;, x = &quot;经度&quot;, y = &quot;纬度&quot;, title = &quot;斐济地震带&quot;) + theme_minimal() + theme( title = element_text(family = &quot;source-han-sans-cn&quot;), axis.title = element_text(family = &quot;source-han-serif-cn&quot;), legend.title = element_text(family = &quot;source-han-sans-cn&quot;), legend.position = c(1, 0), legend.justification = c(1, 0) ) 图 12.3: 斐济地震带 用 base plot 画地图，如图 12.4 所示 library(mapproj) data(unemp) data(county.fips) colors &lt;- c(&quot;#F1EEF6&quot;, &quot;#D4B9DA&quot;, &quot;#C994C7&quot;, &quot;#DF65B0&quot;, &quot;#DD1C77&quot;, &quot;#980043&quot;) unemp$colorBuckets &lt;- as.numeric(cut(unemp$unemp, c(0, 2, 4, 6, 8, 10, 100))) leg.txt &lt;- c(&quot;&lt;2%&quot;, &quot;2-4%&quot;, &quot;4-6%&quot;, &quot;6-8%&quot;, &quot;8-10%&quot;, &quot;&gt;10%&quot;) cnty.fips &lt;- county.fips$fips[match( map(&quot;county&quot;, plot = FALSE)$names, county.fips$polyname )] colorsmatched &lt;- unemp$colorBuckets[match(cnty.fips, unemp$fips)] par(mar = c(0, 0, 2, 0)) # draw map map(&quot;county&quot;, col = colors[colorsmatched], fill = TRUE, resolution = 0, lty = 0, projection = &quot;polyconic&quot; ) map(&quot;state&quot;, col = &quot;white&quot;, fill = FALSE, add = TRUE, lty = 1, lwd = 0.2, projection = &quot;polyconic&quot; ) title(&quot;unemployment by county, 2009&quot;) legend(&quot;top&quot;, leg.txt, horiz = TRUE, fill = colors) 图 12.4: 2009年美国各城镇失业率 12.3 xkcd 这篇文章主要使用 ggplot2 包(Wickham 2016)绘图，为了好玩我们还使用 xkcd 字体，先下载和加载 xkcd 包(Torres-Manzanera 2016)，它提供一个 gg 风格的图层theme_xkcd()，图 12.5 是一个简单使用 xkcd 字体的例子 library(extrafont) #&gt; Registering fonts with R library(xkcd) ggplot(aes(mpg, wt), data = mtcars) + geom_point() + theme_xkcd() 图 12.5: xkcd 风的图 12.4 fontcm 安装 fontcm 包(Chang, Kryukov, and Murrell 2014)处理数学公式，下载 fontcm 包7 和相关字体，使用 fontcm 包，一个小 demo 如下，这里已经使用 cairo_pdf 设备保存图片了，如果用 pdf 设备保存会更加难看 library(fontcm) p &lt;- qplot(c(1, 5), c(1, 5)) + xlab(&quot;Made with CM fonts&quot;) + ylab(&quot;Made with CM fonts&quot;) + ggtitle(&quot;Made with CM fonts&quot;) # 公式 eq &lt;- &quot;italic(sum(frac(1, n*&#39;!&#39;), n==0, infinity) == lim(bgroup(&#39;(&#39;, 1 + frac(1, n), &#39;)&#39;)^n, n %-&gt;% infinity))&quot; # 默认字体 p1 &lt;- p + annotate(&quot;text&quot;, x = 3, y = 3, parse = TRUE, label = eq) # fig 1 # 使用 CM Roman 字体 p2 &lt;- p + annotate(&quot;text&quot;, x = 3, y = 3, parse = TRUE, family = &quot;CM Roman&quot;, label = eq ) + theme( text = element_text(size = 16, family = &quot;CM Roman&quot;), axis.title.x = element_text(face = &quot;italic&quot;), axis.title.y = element_text(face = &quot;bold&quot;) ) library(gridExtra) grid.arrange(p1,p2, nrow = 1, ncol = 2) 图 12.6: fontcm 处理数学公式 使用 ghostscript 对 pdf 设备保存的图形嵌入数学字体（此嵌入字体的方法对 cairo_pdf 保存的图形无效），最终效果如图 12.7 所示， pdf(file = &#39;figures/ggplot_cm.pdf&#39;,width = 8,height = 4) grid.arrange(p1,p2, nrow = 1, ncol = 2) dev.off() # 嵌入字体 extrafont::embed_fonts(&quot;figures/ggplot_cm.pdf&quot;, outfile = &quot;figures/ggplot_cm_embed.pdf&quot;) 图 12.7: fontcm 处理数学公式 12.5 tikzDevice 先测试一下 tikzDevice::tikzTest() #&gt; #&gt; Active compiler: #&gt; /home/travis/texlive/bin/x86_64-linux/xelatex #&gt; XeTeX 3.14159265-2.6-0.99999 (TeX Live 2018) #&gt; kpathsea version 6.3.0 #&gt; Measuring dimensions of: A #&gt; Running command: &#39;/home/travis/texlive/bin/x86_64-linux/xelatex&#39; -interaction=batchmode -halt-on-error -output-directory &#39;/tmp/Rtmpq3pJhL/tikzDevice764f46351c2e&#39; &#39;/tmp/Rtmpq3pJhL/tikzDevice764f46351c2e/tikzStringWidthCalc.tex&#39; #&gt; [1] 7.5 tikz 源于 LaTeX 宏包，在 R 语言绘图的世界里，对基础图形有很好的支持，如图 12.8 所示，坐标轴标签，标题，图例等位置都支持数学公式，既然含有数学公式，就得设置 dev = 'tikz' 和 fig.ext = 'tex'，并且只产生 PDF 格式图片，除非研究一个钩子（见 common.R 文件），遇到这种情况再将 PDF 转化为 PNG 格式 x &lt;- rnorm(10) y &lt;- x + rnorm(5, sd = 0.25) model &lt;- lm(y ~ x) rsq &lt;- summary(model)$r.squared rsq &lt;- signif(rsq, 4) plot(x, y, main = &quot;Hello \\\\LaTeX!&quot;, xlab = &quot;$x$&quot;, ylab = &quot;$y$&quot;, sub = &quot;$\\\\mathcal{N}(\\\\mathbf{x};\\\\mu,\\\\Sigma)$&quot;) abline(model, col = &quot;red&quot;) mtext(paste(&quot;Linear model: $R^{2}=&quot;, rsq, &quot;$&quot;), line = 0.5) legend(&quot;bottomright&quot;, legend = paste0(&quot;$y = &quot;, round(coef(model)[2], 3), &quot;x +&quot;, round(coef(model)[1], 3), &quot;$&quot; ), bty = &quot;n&quot;) 或者单独保存成 pdf 图片和 png 图片，然后插入 图 12.8: tikz 之线性回归 再把代码贴上 cat(readLines(&quot;code/tikz-linear-regression.R&quot;, encoding = &quot;UTF-8&quot;), sep = &quot;\\n&quot;) #&gt; x &lt;- rnorm(10) #&gt; y &lt;- x + rnorm(5, sd = 0.25) #&gt; model &lt;- lm(y ~ x) #&gt; rsq &lt;- summary(model)$r.squared #&gt; rsq &lt;- signif(rsq, 4) #&gt; plot(x, y, main = &quot;Hello \\\\LaTeX!&quot;, xlab = &quot;$x$&quot;, ylab = &quot;$y$&quot;, #&gt; sub = &quot;$\\\\mathcal{N}(\\\\mathbf{x};\\\\mu,\\\\Sigma)$&quot;) #&gt; abline(model, col = &quot;red&quot;) #&gt; mtext(paste(&quot;Linear model: $R^{2}=&quot;, rsq, &quot;$&quot;), line = 0.5) #&gt; legend(&quot;bottomright&quot;, legend = paste0(&quot;$y = &quot;, #&gt; round(coef(model)[2], 3), #&gt; &quot;x +&quot;, #&gt; round(coef(model)[1], 3), #&gt; &quot;$&quot; #&gt; ), #&gt; bty = &quot;n&quot;) 虽然复杂图片也可直接用 tikz 制作但是，尺寸等细节不好调整（我还没找到合适的方法），比较合适的做法可能是，独立制作图，然后作为图片插入，以一个颇具复杂度的图片为例，如图 12.9 所示 cat(readLines(&quot;code/tikz-persp-3d.R&quot;, encoding = &quot;UTF-8&quot;), sep = &quot;\\n&quot;) #&gt; # 代码来自 http://www.ejwagenmakers.com/misc/Plotting_3d_in_R.pdf #&gt; # 3-D plots #&gt; mu1 &lt;- 0 # setting the expected value of x1 #&gt; mu2 &lt;- 0 # setting the expected value of x2 #&gt; s11 &lt;- 10 # setting the variance of x1 #&gt; s12 &lt;- 15 # setting the covariance between x1 and x2 #&gt; s22 &lt;- 10 # setting the variance of x2 #&gt; rho &lt;- 0.5 # setting the correlation coefficient between x1 and x2 #&gt; x1 &lt;- seq(-10, 10, length = 41) # generating the vector series x1 #&gt; x2 &lt;- x1 # copying x1 to x2 #&gt; f &lt;- function(x1, x2) { #&gt; term1 &lt;- 1 / (2 * pi * sqrt(s11 * s22 * (1 - rho^2))) #&gt; term2 &lt;- -1 / (2 * (1 - rho^2)) #&gt; term3 &lt;- (x1 - mu1)^2 / s11 #&gt; term4 &lt;- (x2 - mu2)^2 / s22 #&gt; term5 &lt;- -2 * rho * ((x1 - mu1) * (x2 - mu2)) / (sqrt(s11) * sqrt(s22)) #&gt; term1 * exp(term2 * (term3 + term4 - term5)) #&gt; } # setting up the function of the multivariate normal density #&gt; z &lt;- outer(x1, x2, f) # calculating the density values #&gt; nrz &lt;- nrow(z) #&gt; ncz &lt;- ncol(z) #&gt; # Create a function interpolating colors in the range of specified colors #&gt; # jet.colors &lt;- colorRampPalette( c(&quot;blue&quot;, &quot;green&quot;) ) #&gt; # Generate the desired number of colors from this palette #&gt; nbcol &lt;- 100 #&gt; # color &lt;- jet.colors(nbcol) #&gt; color &lt;- viridisLite::viridis(100) #&gt; # Compute the z-value at the facet centres #&gt; zfacet &lt;- z[-1, -1] + z[-1, -ncz] + z[-nrz, -1] + z[-nrz, -ncz] #&gt; # Recode facet z-values into color indices #&gt; facetcol &lt;- cut(zfacet, nbcol) #&gt; # persp 坐标轴标签不支持表达式 ?persp #&gt; #&gt; # 使用 tikzDevice 打造出版级的效果图 #&gt; # library(tikzDevice) #&gt; # tf &lt;- file.path(getwd(), &quot;figures/binormal.tex&quot;) #&gt; # tikz(tf, width = 6, height = 5.5, pointsize = 30, standAlone = TRUE) #&gt; op &lt;- par(mar = c(2, 3, 3, 0.5)) #&gt; persp(x1, x2, z, #&gt; xlab = &quot;$x_{1}$&quot;, #&gt; ylab = &quot;$x_{2}$&quot;, #&gt; zlab = &quot;$f(\\\\mathsf{x})$&quot;, #&gt; main = &quot;Two dimensional Normal Distribution&quot;, #&gt; col = color[facetcol], border = NA, theta = 30, phi = 20, #&gt; r = 50, d = 0.1, expand = 0.5, ltheta = 90, lphi = 180, #&gt; shade = 0.1, ticktype = &quot;detailed&quot;, nticks = 5, box = TRUE #&gt; ) # produces the 3-D plot #&gt; # adding a text line to the graph #&gt; mtext(&quot;$\\\\mu_1 = 0,\\\\mu_2 = 0,\\\\sigma_{11} = 10,\\\\sigma_{22} = 10,\\\\sigma_{12} = 15, \\\\rho = 0.5$&quot;, side = 3) #&gt; mtext(&quot;$f(\\\\mathsf{x}) = \\\\frac{1}{2\\\\pi\\\\sqrt{\\\\sigma_{11}\\\\sigma_{22}(1-\\\\rho^2)}}\\\\exp\\\\big\\\\{-\\\\frac{1}{2(1-\\\\rho^2)}[\\\\frac{(x_1 - \\\\mu_1)^2}{\\\\sigma_{11}} - 2\\\\rho\\\\frac{(x_1 - \\\\mu_1)(x_2 - \\\\mu_2)}{\\\\sqrt{\\\\sigma_{11}}\\\\sqrt{\\\\sigma_{22}}} + \\\\frac{(x_2 - \\\\mu_2)^2}{\\\\sigma_{22}}]\\\\big\\\\}$&quot;, side = 1) #&gt; par(op) #&gt; # dev.off() #&gt; # tinytex::latexmk(file = &quot;figures/binormal.tex&quot;) 此外还有一个重要原因，tikz 图形绘制起来比较慢，尤其是线条密集型的图片，这样过于耗时，放在 travis 上编译不合适。如图 12.9 图 12.9: tikz 之复杂公式 12.6 TikZ 和 PGF 如图 ?? 所示，模板存放在 tikz/tikz2pdf.tex \\begin{tikzpicture}[scale=.7] \\draw [fill=gray!30,very thick] (0,-1) rectangle (5,1); \\draw [very thick] (5, 0) -- (13,0); \\node [below] at (2,-1) {\\large Hello}; \\node [below, align=center] at (0,-1) {\\large Two\\\\ lines}; \\end{tikzpicture} 一幅纯 tikz 代码绘制的图形，代码如下 cat(readLines(&quot;tikz/mini-demo.tex&quot;, encoding = &quot;UTF-8&quot;), sep = &quot;\\n&quot;) #&gt; \\documentclass[tikz]{standalone} #&gt; \\usepackage{tikz} #&gt; \\begin{document} #&gt; \\begin{tikzpicture}[domain=0:4] #&gt; \\draw[very thin,color=gray] (-0.1,-1.1) grid (3.9,3.9); #&gt; \\draw[-&gt;] (-0.2,0) -- (4.2,0) node[right] {$x$}; #&gt; \\draw[-&gt;] (0,-1.2) -- (0,4.2) node[above] {$f(x)$}; #&gt; \\draw[color=red] plot (\\x,\\x) node[right] {$f(x) =x$}; #&gt; % \\x r 表示弧度 #&gt; \\draw[color=blue] plot (\\x,{cos(\\x r)}) node[right] {$f(x) = \\cos x$}; #&gt; \\draw[color=green] plot (\\x,{(\\x r)^0.1*sin(\\x r)}) node[right] {$f(x) = x^{\\frac{1}{10}} \\sin x$}; #&gt; \\draw[color=orange] plot (\\x,{0.05*exp(\\x)}) node[right] {$f(x) = \\frac{1}{20} \\mathrm e^x$}; #&gt; \\end{tikzpicture} #&gt; \\end{document} 图 12.10: 一幅迷你 tikz 图形 par(mar = c(4.5, 4, .1, .1)) hist(rnorm(1000), main=&#39;&#39;, xlab=&#39;$x$ (how the fonts look like here?)&#39;, ylab=&#39;$\\\\hat{f}(x) = \\\\frac{1}{nh}\\\\sum_{i=1}^n \\\\cdots$&#39;) 参考文献 "],
["animotion.html", "第 13 章 动画 13.1 JS 动画 13.2 svg 动画 13.3 mapmate 13.4 rgl", " 第 13 章 动画 13.1 JS 动画 13.2 svg 动画 svgViewR https://aaronolsen.github.io/tutorials/visualization3d.html 13.3 mapmate devtools::install_github(&quot;leonawicz/mapmate&quot;) 13.4 rgl 真三维 "],
["optimation.html", "第 14 章 数值优化 14.1 测试函数", " 第 14 章 数值优化 14.1 测试函数 \\[f(x,y) = 3*(1-x)*\\mathrm{e}^{-x^2 - (y+1)^2} - 10*(\\frac{x}{5} - x^3 - y^5)*\\mathrm{e}^{-x^2-y^2} - \\frac{1}{3}*\\mathrm{e}^{-(x+1)^2-y^2}\\] 多元函数求导 符号微分，表达式微分 符号求导，表达式求导 peaks_fun &lt;- expression(3*(1-x)*exp^(-x^2 - (y+1)^2) - 10*(x/5 - x^3 - y^5)*exp^(-x^2-y^2) -1/3*exp^(-(x+1)^2-y^2)) D(peaks_fun, &quot;x&quot;) #&gt; -(3 * (1 - x) * (exp^(-x^2 - (y + 1)^2) * (log(exp) * (2 * x))) + #&gt; 3 * exp^(-x^2 - (y + 1)^2) + (10 * (1/5 - 3 * x^2) * exp^(-x^2 - #&gt; y^2) - 10 * (x/5 - x^3 - y^5) * (exp^(-x^2 - y^2) * (log(exp) * #&gt; (2 * x)))) - 1/3 * (exp^(-(x + 1)^2 - y^2) * (log(exp) * #&gt; (2 * (x + 1))))) D(peaks_fun, &quot;y&quot;) #&gt; -(3 * (1 - x) * (exp^(-x^2 - (y + 1)^2) * (log(exp) * (2 * (y + #&gt; 1)))) - (10 * (x/5 - x^3 - y^5) * (exp^(-x^2 - y^2) * (log(exp) * #&gt; (2 * y))) + 10 * (5 * y^4) * exp^(-x^2 - y^2)) - 1/3 * (exp^(-(x + #&gt; 1)^2 - y^2) * (log(exp) * (2 * y)))) An R package for optimization using genetic algorithms "],
["section-15.html", "第 15 章 随机模拟 15.1 随机数 15.2 随机过程 15.3 分布式", " 第 15 章 随机模拟 15.1 随机数 产生重复的随机数，octave 实现，随机数生成的详细介绍请看统计之都文章 随机数生成及其在统计模拟中的应用 %% copy from https://stackoverflow.com/questions/13735096/python-vs-octave-random-generator function state = mtstate(seed) state = uint32(zeros(625,1)); state(1) = uint32(seed); for i=1:623, tmp = uint64(1812433253)*uint64(bitxor(state(i),bitshift(state(i),-30)))+i; state(i+1) = uint32(bitand(tmp,uint64(intmax(&#39;uint32&#39;)))); end state(625) = 1; end rand(&#39;state&#39;,mtstate(4)); rand(1,5) rand(&#39;state&#39;,mtstate(4)); rand(1,5) #&gt; ans = #&gt; #&gt; 0.96703 0.54723 0.97268 0.71482 0.69773 #&gt; #&gt; ans = #&gt; #&gt; 0.96703 0.54723 0.97268 0.71482 0.69773 dqrng: Fast Pseudo Random Number Generators 15.2 随机过程 15.2.1 随机游走 15.2.2 遍历定理 15.2.3 M-H 算法 15.2.4 Gibbs 算法 15.2.5 HMC 算法 汉密尔顿蒙特卡罗算法 15.3 分布式 15.3.1 Rmpi 安装配置 http://www.stats.uwo.ca/faculty/yu/Rmpi/ 15.3.2 Rhpc https://prs.ism.ac.jp/~nakama/Rhpc/ Function of apply style using ‘MPI’ provides better ‘HPC’ environment on R. And this package supports long vector, can deal with slightly big data. "],
["bayes.html", "第 16 章 贝叶斯计算 16.1 BUGS 软件 16.2 Stan 框架", " 第 16 章 贝叶斯计算 从 WinBUGS 到 OpenBUGS，从 JAGS 到 Stan，BUGS 的发展从未停止过，Stan8 是一个统计建模和高性能统计计算平台。 16.1 BUGS 软件 最大后验估计，贝叶斯分层模型 16.2 Stan 框架 LOO for non-factorized normal models Playing with negative binomial multilevel models in Stan An Introduction to Greta tensoflow and stan 16.2.1 PyStan 接口 # 整合 Python 语言到 R Mrakdown import pystan import numpy as np import matplotlib.pyplot as plt schools_code = &quot;&quot;&quot; data { int&lt;lower=0&gt; J; // number of schools real y[J]; // estimated treatment effects real&lt;lower=0&gt; sigma[J]; // s.e. of effect estimates } parameters { real mu; real&lt;lower=0&gt; tau; real eta[J]; } transformed parameters { real theta[J]; for (j in 1:J) theta[j] = mu + tau * eta[j]; } model { eta ~ normal(0, 1); y ~ normal(theta, sigma); } &quot;&quot;&quot; schools_dat = {&#39;J&#39;: 8, &#39;y&#39;: [28, 8, -3, 7, -1, 1, 18, 12], &#39;sigma&#39;: [15, 10, 16, 11, 9, 11, 10, 18]} sm = pystan.StanModel(model_code = schools_code) fit = sm.sampling(data = schools_dat, iter = 1000, chains = 4) print(fit) eta = fit.extract(permuted=True)[&#39;eta&#39;] np.mean(eta, axis=0) ## if matplotlib is installed (optional, not required), a visual summary and ## traceplot are available # fit.plot() # plt.show() 16.2.2 RStan 接口 Stan 提供的R语言接口 rstan 包 (Guo, Gabry, and Goodrich 2018) 及其扩展 StanHeaders 包 (Goodrich et al. 2018) 、bayesplot包 (Gabry and Mahr 2018) 、brms 包 (Bürkner 2017)、 rstanarm 包 (Gabry and Goodrich 2018)以及 rstan 的 wiki9 及其在空间广义线性混合效应模型的参数估计和预测中的应用。 加载 rstan,如果你的电脑配置有多核处理器，内存也充足，那么可以考虑使用并行方式去估计你的模型参数， library(rstan) #&gt; Loading required package: ggplot2 #&gt; Loading required package: StanHeaders #&gt; rstan (Version 2.17.3, GitRev: 2e1f913d3ca3) #&gt; For execution on a local, multicore CPU with excess RAM we recommend calling #&gt; options(mc.cores = parallel::detectCores()). #&gt; To avoid recompilation of unchanged Stan programs, we recommend calling #&gt; rstan_options(auto_write = TRUE) rstan_options(auto_write = TRUE) options(mc.cores = parallel::detectCores()) schools_dat &lt;- list(J = 8, y = c(28, 8, -3, 7, -1, 1, 18, 12), sigma = c(15, 10, 16, 11, 9, 11, 10, 18)) fit &lt;- stan(file = &#39;data/8schools.stan&#39;, data = schools_dat, iter = 1000, chains = 4) print(fit) plot(fit) pairs(fit, pars = c(&quot;mu&quot;, &quot;tau&quot;, &quot;lp__&quot;)) la &lt;- extract(fit, permuted = TRUE) # return a list of arrays mu &lt;- la$mu ### return an array of three dimensions: iterations, chains, parameters a &lt;- extract(fit, permuted = FALSE) ### use S3 functions as.array (or as.matrix) on stanfit objects a2 &lt;- as.array(fit) m &lt;- as.matrix(fit) print(fit, digits = 1) schools_dat &lt;- read_rdump(&#39;data/8schools.rdump&#39;) source(&#39;data/8schools.rdump&#39;) fit &lt;- stan(file = &#39;data/8schools.stan&#39;, iter = 1000, chains = 4) Bayesian Data Analysis https://github.com/avehtari/BDA_R_demos Bayesian Data Analysis, 3rd ed by Gelman, Carlin, Stern, Dunson, Vehtari, and Rubin (BDA3). RStan Book https://github.com/MatsuuraKentaro/RStanBook 这是日文版 An Introduction to State Space Time Series Analysis https://github.com/sinhrks/stan-statespace Stan models for state space time series Draft introduction to probability and inference aimed at the Stan manual. https://github.com/betanalpha/stan_intro Bayesian Modeling using Stan https://github.com/fonnesbeck/stan_workshop_2016 Bayesian Modeling using Stan in R (May/June 2016) Define Stan models using glmer-style (lme4) formulas https://github.com/rmcelreath/glmer2stan Examples of working and non-working models, initially for ODCS 2016 in Boston. https://github.com/sakrejda/stan-workshop State space models (dynamic linear models, hidden Markov models) implemented in Stan https://github.com/jrnold/ssmodels-in-stan State Space Models in Stan https://jrnold.github.io/ssmodels-in-stan/ Conditional autoregressive models in Stan https://github.com/mbjoseph/CARstan Implementation of B-Splines in Stan https://github.com/milkha/Splines_in_Stan https://magesblog.com/post/correlated-lognormal-chain-ladder-model/ http://xcelab.net/rm/statistical-rethinking/ 参考文献 "],
["r-inla.html", "第 17 章 近似推断 17.1 高斯-马尔科夫随机场 17.2 贝叶斯近似推断", " 第 17 章 近似推断 INLA 材料 A gentle INLA tutorial https://www.precision-analytics.ca/blog-1/inla A Gentle Stan vs. INLA Comparison http://www.martinmodrak.cz/2018/02/02/a-gentle-stan-vs.-inla-comparison/ 探讨算法比较 http://discourse.mc-stan.org/t/blog-a-gentle-stan-to-inla-comparison/3205 GPstuff: Gaussian process models for Bayesian analysis http://research.cs.aalto.fi/pml/software/gpstuff/ GPstuff: 高斯过程模型与空间数据分析工具箱(Vanhatalo et al. 2013) 适用于 Matlab/Octave 和 R 17.1 高斯-马尔科夫随机场 17.2 贝叶斯近似推断 随机偏微分方程，高维积分，拉普拉斯近似 参考文献 "],
["spatial.html", "第 18 章 空间数据 18.1 分析与可视化 18.2 sf 18.3 PrevMap", " 第 18 章 空间数据 18.1 分析与可视化 Here is a review of existing methods. 18.2 sf library(sf) #&gt; Linking to GEOS 3.5.0, GDAL 2.2.2, proj.4 4.8.0 Intro to Geospatial Data with R http://www.datacarpentry.org/r-raster-vector-geospatial/ 18.3 PrevMap library(PrevMap) #&gt; Loading required package: geoR #&gt; Warning: no DISPLAY variable so Tk is not available #&gt; -------------------------------------------------------------- #&gt; Analysis of Geostatistical Data #&gt; For an Introduction to geoR go to http://www.leg.ufpr.br/geoR #&gt; geoR version 1.7-5.2 (built on 2016-05-02) is now loaded #&gt; -------------------------------------------------------------- #&gt; Loading required package: maxLik #&gt; Loading required package: miscTools #&gt; #&gt; Please cite the &#39;maxLik&#39; package as: #&gt; Henningsen, Arne and Toomet, Ott (2011). maxLik: A package for maximum likelihood estimation in R. Computational Statistics 26(3), 443-458. DOI 10.1007/s00180-010-0217-1. #&gt; #&gt; If you have questions, suggestions, or comments regarding the &#39;maxLik&#39; package, please use a forum or &#39;tracker&#39; at maxLik&#39;s R-Forge site: #&gt; https://r-forge.r-project.org/projects/maxlik/ #&gt; Loading required package: raster #&gt; Loading required package: sp #&gt; Loading required package: pdist #&gt; Loading required package: Matrix 案例 library(HSAR) data(Beijingdistricts) library(spdep) plot(Beijingdistricts,border=&quot;light grey&quot;) # extract the area of each district library(rgeos) library(classInt) library(RColorBrewer) Beijingdistricts$geo.area &lt;- gArea(Beijingdistricts,byid=TRUE) / 1000000 x &lt;- Beijingdistricts$geo.area breaks &lt;- classIntervals(x,4,&quot;fisher&quot;)$brks groups &lt;- cut(x,breaks,include.lowest=TRUE,labels=FALSE) palette &lt;- brewer.pal(4, &quot;Blues&quot;) plot(Beijingdistricts,col=palette[groups],border=&quot;grey&quot;) # extract the district level spatial weights matrix nb.list &lt;- poly2nb(Beijingdistricts,queen=FALSE) mat.list &lt;- nb2mat(nb.list,style=&quot;W&quot;) M &lt;- as(mat.list,&quot;dgCMatrix&quot;) 空间数据分析 to think about, not sure if needed but then this would be a good place to point out why our book might have advantages over other books. Compare with: - Bivand, R., Pebesma, E., Gomez-Rubio, V. (2013): Applied spatial data analysis with R. - Blangiardo, M. &amp; Cameletti, M. (2015): Spatial and spatio-temporal Bayesian models with R - INLA. - Brunsdon, C. &amp; Comber, L. (2015): An introduction to R for spatial analysis and mapping. - Dorman, M. (2014): Learning R for geospatial analysis. - Hijmans, R. (2016): Spatial data analysis and modeling with R. http://rspatial.org/intr/index.html (haven’t read it but might be more suitable for beginners, however, it does not consider sf; additionally, it provides more code than text, and hence, probably less explanations than our book) - Quiang, S. (2016): Environmental and Ecological Statistics with R (not really a competitor, I have ordered a copy, this book is really about modeling, and I would rather prefer the Zuur et al. books over it) - Wegmann, M., Leutner, B., Dech, S. (2016): Remote Sensing and GIS for ecologists: Using Open Source Software. - Zuur, A., Ieno, E., Saveliev, A. (2017): Beginner’s guide to spatial, temporal and spatial-temporal ecological data analysis with R-INLA. Put the competing books into categories, e.g., introduction to spatial analysis (Brundsdon, Dorman, Hijmans), advanced spatial analysis (Bivand), topical spatial analysis (Quiang, Wegmann), (mainly) spatial modeling (Bivand, Blangiardo, Hijmans, Quiang, Zuur). Point out where our book fits in and which gap it is filling -&gt; somewhere between advanced (but not that hard) and spatial modeling with a broad range of topics (not just one like ecology). We try to address a broad audiecence with an interest in spatial data, and how things can be get done, not just theoretically but in an applied way. On the other hand, we embed the shown methods into the bigger field of GIScience, provide context and refer to further literature for the interested reader. "],
["network.html", "第 19 章 网络数据 19.1 分析与可视化 19.2 gephi", " 第 19 章 网络数据 We describe our methods in this chapter. 19.1 分析与可视化 http://www.htmlwidgets.org/ R 与 JavaScript https://github.com/rich-iannone/DiagrammeR 分析 https://github.com/igraph/python-igraph 与 https://github.com/igraph/rigraph 19.2 gephi "],
["glm.html", "第 20 章 广义线性模型 20.1 线性模型 20.2 参数估计 20.3 高维问题", " 第 20 章 广义线性模型 通过先回顾线性模型相关知识，过渡到广义线性模型 20.1 线性模型 20.1.1 参数估计 20.1.2 最小二乘 20.1.3 最大似然 20.2 参数估计 20.2.1 最小二乘估计 glm 20.2.2 广义最小二乘估计 gls 20.2.3 最大似然估计 20.3 高维问题 Statistical Inference and Sure Independence Screening via Ball Statistics Ball SIS: Sure Independence Screening SIS "],
["mixed-model.html", "第 21 章 混合效应模型 21.1 方差分析 21.2 线性混合效应模型 21.3 广义线性混合效应模型 21.4 空间广义线性混合效应模型 21.5 参数估计 21.6 高维问题", " 第 21 章 混合效应模型 21.1 方差分析 估计 21.2 线性混合效应模型 lme4: An R package for fitting and analyzing linear, nonlinear and generalized linear mixed models. github http://lme4.r-forge.r-project.org/ 21.3 广义线性混合效应模型 材料 fitting mixed models with (temporal) correlations in R 时间相依的结构的 GLMMs及其实现 作者 Github 主页 https://bbolker.github.io/mixedmodels-misc/notes/corr_braindump.html Broadening Your Statistical Horizons: Generalized Linear Models and Multilevel Models https://bookdown.org/roback/bookdown-bysh/ 21.4 空间广义线性混合效应模型 21.5 参数估计 21.5.1 限制极大似然估计 21.5.2 profile 似然估计 21.5.3 贝叶斯估计 21.6 高维问题 "],
["gam.html", "第 22 章 广义可加模型 22.1 一般广义可加模型 22.2 广义可加混合效应模型 22.3 高维问题", " 第 22 章 广义可加模型 22.1 一般广义可加模型 22.2 广义可加混合效应模型 Repo for tutorial/paper on mixed-effect GAMs (General Additive Models with Mixed-Effect Smooths) https://github.com/noamross/mixed-effect-gams 22.3 高维问题 "],
["pandoc-markdown.html", "A R Markdown A.1 bookdown A.2 复杂表格制作", " A R Markdown 图片引用 工作流程图 gitbook 这样网页又该如何引用这张图片呢？ 图 A.1: 两种编译方式及过程 如图 A.1 展示了两种编译方式 表格交叉引用 参考文献交叉引用 A.1 bookdown 在指定目录创建 Book 项目， bookdown:::bookdown_skeleton(&quot;~/book&quot;) 项目根目录的文件列表 directory/ ├── index.Rmd ├── 01-intro.Rmd ├── 02-literature.Rmd ├── 03-method.Rmd ├── 04-application.Rmd ├── 05-summary.Rmd ├── 06-references.Rmd ├── _bookdown.yml ├── _output.yml ├── book.bib ├── preamble.tex ├── README.md └── style.css broom 和 pixiedust 制作表格 Tables So Beautifully Fine-Tuned You Will Believe It’s Magic. https://github.com/nutterb/pixiedust A.2 复杂表格制作 kableExtra 借助 kableExtra 包 (Zhu 2018) 可以制作复杂的统计图表，更多的例子请看 https://github.com/haozhu233/kableExtra ，我喜欢这个图标设计，如图 A.2 图 A.2: kableExtra 的徽标 library(knitr) library(kableExtra) dt &lt;- mtcars[1:5, 1:4] # HTML table kable(dt, format = &quot;html&quot;, caption = &quot;kableExtra 制作&quot;) %&gt;% kable_styling(bootstrap_options = &quot;striped&quot;, full_width = F) %&gt;% add_header_above(c(&quot; &quot;, &quot;Group 1&quot; = 2, &quot;Group 2[note]&quot; = 2)) %&gt;% add_footnote(c(&quot;table footnote&quot;)) 表 A.1: kableExtra 制作 Group 1 Group 2a mpg cyl disp hp Mazda RX4 21.0 6 160 110 Mazda RX4 Wag 21.0 6 160 110 Datsun 710 22.8 4 108 93 Hornet 4 Drive 21.4 6 258 110 Hornet Sportabout 18.7 8 360 175 a table footnote 如何将表格横向或者纵向展示 添加短标题 library(dplyr) library(knitr) library(kableExtra) # 这个必须加载 df &lt;- data.frame( X = sample(letters, 10), y = runif(10), z = sample(10:20, 10)) kable(df, booktabs = TRUE, caption = &quot;This caption is way too long and doesnt look good when formatted in the Table of Contents. What you really need here is a much shorter caption so that your eyes dont go crazy trying to figure out what information the author is trying to convey. Often there is too much information in the caption anyway so why not shorten it?.&quot;, escape = FALSE, format = &#39;latex&#39;) %&gt;% kable_styling(latex_options = c(&quot;striped&quot;, &quot;hold_position&quot;)) kable(df, booktabs = TRUE, caption = &quot;This caption is way too long and doesnt look good when formatted in the Table of Contents. What you really need here is a much shorter caption so that your eyes dont go crazy trying to figure out what information the author is trying to convey. Often there is too much information in the caption anyway so why not shorten it?.&quot;, caption.short = &quot;This is a shorter caption.&quot;, escape = FALSE, format = &#39;latex&#39;) %&gt;% kable_styling(latex_options = c(&quot;striped&quot;, &quot;hold_position&quot;)) 参考文献 "],
["python-plot.html", "B Python 绘图 B.1 matplotlib B.2 seaborn B.3 pyglet B.4 mayavi B.5 bokeh B.6 plotly", " B Python 绘图 B.1 matplotlib 先安装必要的模块 sudo apt-get install -y python-tk python-pip sudo -H pip install numpy matplotlib 在 R Markdown 中生成PDF需要如下tex包 - psnfss - type1cm - ucs - tex4ht - ncntrsbk - helvetic - preview 默认使用 STIX 数学字体 和 DejaVu Sans 英文字体，如图 B.1 所示 import numpy as np import matplotlib.pyplot as plt plt.switch_backend(&#39;agg&#39;) # Very Important in R Markdown t = np.arange(0.0, 2.0, 0.01) s = np.sin(2*np.pi*t) plt.plot(t,s) plt.title(r&#39;$\\alpha_i &gt; \\beta_i$&#39;, fontsize=20) plt.text(1, -0.6, r&#39;$\\sum_{i=0}^\\infty x_i$&#39;, fontsize=20) plt.text(0.6, 0.6, r&#39;$\\mathcal{A}\\mathrm{sin}(2 \\omega t)$&#39;, fontsize=20) plt.xlabel(&#39;time (s)&#39;) plt.ylabel(&#39;volts (mV)&#39;) plt.show() # plt.savefig(&#39;math-in-plot.png&#39;, bbox_inches=&#39;tight&#39;, dpi = 300) # plt.savefig(&#39;math-in-plot.pdf&#39;, bbox_inches=&#39;tight&#39;) 图 B.1: 数学公式 dpi 分辨率，越大图像越清晰，对矢量图形无效 bbox_inches 去除图形周边空白区域 Python 的 matplotlib 模块没有叫 cairo_pdf 的保存设备，所以此处设置为 dev = &quot;pdf&quot;，它支持的图片格式有 eps, pdf, pgf, png, ps, raw, rgba, svg, svgz Windows 下保存的 PDF 图片需要用 gs 嵌入字体才可以，不然会出现无法显示 XX 字体的错误，假设在 R 环境中，只需如下两行命令即可 # Needed only on Windows - run once per R session # Adjust the path to match your installation of Ghostscript Sys.setenv(R_GSCMD = &quot;C:/Program Files/gs/gs9.23/bin/gswin64c.exe&quot;) embedFonts(file = &quot;math-in-plot.pdf&quot;, outfile = &quot;math-in-plot-embed.pdf&quot;) 如图 B.2 from __future__ import unicode_literals import numpy as np import matplotlib matplotlib.rcParams[&#39;text.usetex&#39;] = True matplotlib.rcParams[&#39;text.latex.unicode&#39;] = True import matplotlib.pyplot as plt plt.switch_backend(&#39;agg&#39;) # Very Important in R Markdown t = np.linspace(0.0, 1.0, 100) s = np.cos(4 * np.pi * t) + 2 fig, ax = plt.subplots(figsize=(6, 4), tight_layout=True) ax.plot(t, s) ax.set_xlabel(r&#39;\\textbf{time (s)}&#39;) # ax.set_ylabel(r&#39;\\textit{Velocity}(\\N{DEGREE SIGN}/sec)&#39;, fontsize=16) ax.set_ylabel(r&#39;\\textit{Velocity}($^{\\circ}$/sec)&#39;, fontsize=16) ax.set_title(r&#39;\\TeX\\ is Number $\\displaystyle\\sum_{n=1}^\\infty&#39; r&#39;\\frac{-e^{i\\pi}}{2^n}$!&#39;, fontsize=16, color=&#39;r&#39;) plt.show() 图 B.2: 本真的公式样式 基本用法 http://qiangbo.space/2018-04-06/matplotlib_l1/ 如果系统有安装其它字体，可以设置你喜欢的字体 font.family : serif font.serif : Times, Palatino, New Century Schoolbook, Bookman, Computer Modern Roman font.sans-serif : Helvetica, Avant Garde, Computer Modern Sans serif font.cursive : Zapf Chancery font.monospace : Courier, Computer Modern Typewriter text.usetex : true #from matplotlib import rc #rc(&#39;font&#39;,**{&#39;family&#39;:&#39;sans-serif&#39;,&#39;sans-serif&#39;:[&#39;Helvetica&#39;]}) ## for Palatino and other serif fonts use: #rc(&#39;font&#39;,**{&#39;family&#39;:&#39;serif&#39;,&#39;serif&#39;:[&#39;Palatino&#39;]}) #rc(&#39;text&#39;, usetex=True) import numpy as np import matplotlib.pyplot as plt plt.switch_backend(&#39;agg&#39;) # Very Important in R Markdown # Example data t = np.arange(0.0, 1.0 + 0.01, 0.01) s = np.cos(4 * np.pi * t) + 2 plt.rc(&#39;text&#39;, usetex=True) plt.rc(&#39;font&#39;, family=&#39;serif&#39;) # plt.rc(&#39;font&#39;, family=&#39;sans-serif&#39;) plt.plot(t, s) plt.xlabel(r&#39;\\textbf{time} (s)&#39;) plt.ylabel(r&#39;\\textit{voltage} (mV)&#39;,fontsize=16) plt.title(r&quot;\\TeX\\ is Number &quot; r&quot;$\\displaystyle\\sum_{n=1}^\\infty\\frac{-e^{i\\pi}}{2^n}$!&quot;, fontsize=16, color=&#39;gray&#39;) # Make room for the ridiculously large title. plt.subplots_adjust(top=0.8) # plt.savefig(&#39;tex_demo&#39;) plt.show() 图 7.4: Python数学字体设置 B.2 seaborn seaborn: statistical data visualization http://seaborn.pydata.org/ Seaborn is a Python visualization library based on matplotlib. It provides a high-level interface for drawing attractive statistical graphics. statsmodels B.3 pyglet 处理音视频文件 B.4 mayavi 三维图形 B.5 bokeh 主页 https://bokeh.pydata.org/en/latest/ R Markdown 暂不支持动态 Python 图形的展示 # https://bokeh.pydata.org/en/latest/docs/gallery/joyplot.html from numpy import linspace from scipy.stats.kde import gaussian_kde from bokeh.io import output_file, show from bokeh.models import ColumnDataSource, FixedTicker, PrintfTickFormatter from bokeh.plotting import figure from bokeh.sampledata.perceptions import probly import colorcet as cc output_file(&quot;joyplot.html&quot;) def joy(category, data, scale=20): return list(zip([category]*len(data), scale*data)) cats = list(reversed(probly.keys())) palette = [cc.rainbow[i*15] for i in range(17)] x = linspace(-20,110, 500) source = ColumnDataSource(data=dict(x=x)) p = figure(y_range=cats, plot_width=900, x_range=(-5, 105), toolbar_location=None) for i, cat in enumerate(reversed(cats)): pdf = gaussian_kde(probly[cat]) y = joy(cat, pdf(x)) source.add(y, cat) p.patch(&#39;x&#39;, cat, color=palette[i], alpha=0.6, line_color=&quot;black&quot;, source=source) p.outline_line_color = None p.background_fill_color = &quot;#efefef&quot; p.xaxis.ticker = FixedTicker(ticks=list(range(0, 101, 10))) p.xaxis.formatter = PrintfTickFormatter(format=&quot;%d%%&quot;) p.ygrid.grid_line_color = None p.xgrid.grid_line_color = &quot;#dddddd&quot; p.xgrid.ticker = p.xaxis[0].ticker p.axis.minor_tick_line_color = None p.axis.major_tick_line_color = None p.axis.axis_line_color = None p.y_range.range_padding = 0.12 show(p) B.6 plotly 商业图形库 "],
["performance.html", "C 性能提升 C.1 Rcpp", " C 性能提升 C++ 编程风格指南 https://github.com/isocpp/CppCoreGuidelines 如何充分利用 Rcpp 包 设个目标，锻炼一下编码能力，关于统计计算和可视化尽可能提供两个方案，至少包含基础 R 包的实现 Pkgs &lt;- sapply(list.files(R.home(&quot;library&quot;)), function(x) packageDescription(pkg = x, fields = &quot;Priority&quot;)) names(Pkgs[Pkgs == &quot;base&quot; &amp; !is.na(Pkgs)]) #&gt; [1] &quot;base&quot; &quot;compiler&quot; &quot;datasets&quot; &quot;graphics&quot; &quot;grDevices&quot; #&gt; [6] &quot;grid&quot; &quot;methods&quot; &quot;parallel&quot; &quot;splines&quot; &quot;stats&quot; #&gt; [11] &quot;stats4&quot; &quot;tcltk&quot; &quot;tools&quot; &quot;utils&quot; 计算程序运行时间 .proctime00 &lt;- proc.time() s &lt;- 0 for (i in seq(1000)) { s &lt;- s + i } proc.time() - .proctime00 #&gt; user system elapsed #&gt; 0.008 0.000 0.007 C.1 Rcpp C.1.1 RcppOctave 混合编程 C.1.2 RcppGSL C.1.3 RcppArmadillo C.1.4 RcppParallel C.1.5 RcppNumerical C.1.6 RcppAlgos devtools::session_info(pkgs = c(&quot;Rcpp&quot;,&quot;RcppOctave&quot;)) #&gt; Session info ------------------------------------------------------------- #&gt; setting value #&gt; version R version 3.4.4 (2017-01-27) #&gt; system x86_64, linux-gnu #&gt; ui X11 #&gt; language (EN) #&gt; collate en_US.UTF-8 #&gt; tz UTC #&gt; date 2018-05-15 #&gt; Packages ----------------------------------------------------------------- #&gt; package * version date source #&gt; codetools 0.2-15 2016-10-05 CRAN (R 3.4.4) #&gt; digest 0.6.15 2018-01-28 CRAN (R 3.4.3) #&gt; glue 1.2.0 2017-10-29 CRAN (R 3.4.2) #&gt; graphics * 3.4.4 2018-03-15 local #&gt; grDevices * 3.4.4 2018-03-15 local #&gt; magrittr 1.5 2014-11-22 CRAN (R 3.1.2) #&gt; methods * 3.4.4 2018-03-15 local #&gt; pkgmaker 0.22 2014-05-14 cran (@0.22) #&gt; Rcpp 0.12.16 2018-03-13 CRAN (R 3.4.4) #&gt; RcppOctave 0.19 2018-05-15 Github (renozao/RcppOctave@fcf4d02) #&gt; registry 0.5 2017-12-03 cran (@0.5) #&gt; stats * 3.4.4 2018-03-15 local #&gt; stringi 1.2.2 2018-05-02 CRAN (R 3.4.4) #&gt; stringr 1.3.1 2018-05-10 CRAN (R 3.4.4) #&gt; tools 3.4.4 2018-03-15 local #&gt; utils * 3.4.4 2018-03-15 local #&gt; xtable 1.8-2 2016-02-05 CRAN (R 3.2.4) "],
["other-tools.html", "D 软件工具 D.1 Octave D.2 Python D.3 Hugo D.4 LaTeX D.5 Pandoc D.6 Rtools D.7 容器 D.8 apt D.9 yum D.10 tlmgr D.11 Git D.12 其它", " D 软件工具 D.1 Octave 安装新版 Octave，详情请见 https://wiki.octave.org/Octave_for_Debian_systems sudo apt-add-repository -y ppa:octave/stable sudo apt-get update sudo apt-get install -y octave Sys.which(&quot;octave&quot;) #&gt; octave #&gt; &quot;/usr/bin/octave&quot; system(&quot;octave --version&quot;) #&gt; GNU Octave, version 4.2.2 #&gt; Copyright (C) 2018 John W. Eaton and others. #&gt; This is free software; see the source code for copying conditions. #&gt; There is ABSOLUTELY NO WARRANTY; not even for MERCHANTABILITY or #&gt; FITNESS FOR A PARTICULAR PURPOSE. #&gt; #&gt; Octave was configured for &quot;x86_64-pc-linux-gnu&quot;. #&gt; #&gt; Additional information about Octave is available at http://www.octave.org. #&gt; #&gt; Please contribute if you find this software useful. #&gt; For more information, visit http://www.octave.org/get-involved.html #&gt; #&gt; Read http://www.octave.org/bugs.html to learn how to submit bug reports. D.2 Python Python 版本和位置 Sys.which(&quot;python&quot;) #&gt; python #&gt; &quot;/usr/bin/python&quot; system2(&quot;python&quot;, args = &quot;--version&quot;, stderr = TRUE) #&gt; Python 2.7.6 升级 Python sudo add-apt-repository ppa:fkrull/deadsnakes-python2.7 sudo apt-get update 可用的 python 模块 help(&#39;modules&#39;) #&gt; #&gt; Please wait a moment while I gather a list of all available modules... #&gt; #&gt; BaseHTTPServer atexit imp sets #&gt; Bastion audiodev importlib setuptools #&gt; CDROM audioop imputil sgmllib #&gt; CGIHTTPServer axi inspect sha #&gt; Canvas base64 io shelve #&gt; Cheetah bdb itertools shlex #&gt; ConfigParser binascii json shutil #&gt; Cookie binhex jsonpatch signal #&gt; DLFCN bisect jsonpointer site #&gt; Dialog boto keyword sitecustomize #&gt; DocXMLRPCServer bsddb landscape six #&gt; FileDialog bz2 lib2to3 smtpd #&gt; FixTk bzrlib linecache smtplib #&gt; HTMLParser cPickle linuxaudiodev sndhdr #&gt; IN cProfile locale socket #&gt; MimeWriter cStringIO logging spwd #&gt; OpenSSL calendar lsb_release sqlite3 #&gt; PAM cgi macpath sre #&gt; Queue cgitb macurl2path sre_compile #&gt; ScrolledText chardet mailbox sre_constants #&gt; SimpleDialog chunk mailcap sre_parse #&gt; SimpleHTTPServer cloudinit markupbase ssl #&gt; SimpleXMLRPCServer cmath marshal stat #&gt; SocketServer cmd math statvfs #&gt; StringIO code matplotlib string #&gt; TYPES codecs md5 stringold #&gt; Tix codeop mercurial stringprep #&gt; Tkconstants collections mhlib strop #&gt; Tkdnd colorsys mimetools struct #&gt; Tkinter commands mimetypes subprocess #&gt; UserDict compileall mimify sunau #&gt; UserList compiler miniterm sunaudio #&gt; UserString configobj mmap svg_regex #&gt; _LWPCookieJar contextlib modulefinder svg_transform #&gt; _MozillaCookieJar cookielib mpl_toolkits symbol #&gt; __builtin__ copy multifile symtable #&gt; __future__ copy_reg multiprocessing sys #&gt; _abcoll cqlsh mutex sysconfig #&gt; _ast cqlshlib netrc syslog #&gt; _bisect crcmod new tabnanny #&gt; _bsddb crypt nis tarfile #&gt; _codecs csv nntplib telnetlib #&gt; _codecs_cn ctypes ntpath tempfile #&gt; _codecs_hk curl nturl2path termios #&gt; _codecs_iso2022 curses numbers test #&gt; _codecs_jp datetime numpy textwrap #&gt; _codecs_kr dateutil oauth this #&gt; _codecs_tw dbhash opcode thread #&gt; _collections dbm operator threading #&gt; _csv deb822 optparse time #&gt; _ctypes debconf os timeit #&gt; _ctypes_test debian os2emxpath tkColorChooser #&gt; _curses debian_bundle ossaudiodev tkCommonDialog #&gt; _curses_panel decimal parser tkFileDialog #&gt; _elementtree decorator pdb tkFont #&gt; _functools difflib pickle tkMessageBox #&gt; _hashlib dircache pickletools tkSimpleDialog #&gt; _heapq dis pip toaiff #&gt; _hotshot distutils pipes token #&gt; _io doctest pkg_resources tokenize #&gt; _json dumbdbm pkgutil trace #&gt; _locale dummy_thread platform traceback #&gt; _lsprof dummy_threading plistlib ttk #&gt; _md5 easy_install popen2 tty #&gt; _multibytecodec email poplib turtle #&gt; _multiprocessing encodings posix twisted #&gt; _osx_support errno posixfile types #&gt; _pyio exceptions posixpath unicodedata #&gt; _random fcntl pprint unittest #&gt; _sha filecmp prettytable urllib #&gt; _sha256 fileinput profile urllib2 #&gt; _sha512 fnmatch pstats urllib3 #&gt; _socket formatter pty urlparse #&gt; _sqlite3 fpectl pwd user #&gt; _sre fpformat py_compile uu #&gt; _ssl fractions pyclbr uuid #&gt; _strptime ftplib pycurl validate #&gt; _struct functools pydoc virtualenv #&gt; _symtable future_builtins pydoc_data virtualenv_support #&gt; _sysconfigdata gc pyexpat warnings #&gt; _sysconfigdata_nd gdbm pylab wave #&gt; _testcapi genericpath pyparsing weakref #&gt; _threading_local getopt pytz webbrowser #&gt; _tkinter getpass quopri wheel #&gt; _warnings gettext random whichdb #&gt; _weakref glob re wsgiref #&gt; _weakrefset google_compute_engine readline xapian #&gt; _yaml grp repr xdrlib #&gt; abc gzip requests xml #&gt; aifc hashlib resource xmllib #&gt; antigravity heapq rexec xmlrpclib #&gt; anydbm hgext rfc822 xxsubtype #&gt; apt hgext3rd rlcompleter yaml #&gt; apt_inst hmac robotparser yocto_css #&gt; apt_pkg hotshot rpytools zipfile #&gt; aptsources htmlentitydefs runpy zipimport #&gt; argparse htmllib sched zlib #&gt; array httplib scipy zope #&gt; ast ihooks scour #&gt; asynchat imaplib select #&gt; asyncore imghdr serial #&gt; #&gt; Enter any module name to get more help. Or, type &quot;modules spam&quot; to search #&gt; for modules whose descriptions contain the word &quot;spam&quot;. D.3 Hugo 下载 https://github.com/gohugoio/hugo/releases wget https://github.com/gohugoio/hugo/releases/download/v0.40.2/hugo_0.40.2_Linux-64bit.deb sudo dpkg -i hugo_0.40.2_Linux-64bit.deb D.4 LaTeX 可以考虑打包自定义 TinyTeX 发行版，自定义在于最小的中文支持和最喜爱的英文字体设置 fandol 和 sourceserifpro(XeLaTeX)，mathptmx 和 inconsolata(PDFLaTeX), fibeamer, Pandoc’s LaTeX 模板 在 Windows or MacOS 下需要这行操作 tlmgr --repository http://www.preining.info/tlgpg/ install tlgpg 系统安装的字体 fonts &lt;- base::system(&quot;fc-list :lang=en | sort&quot;, intern = TRUE) unique(do.call(rbind, strsplit(fonts, split = &quot;:&quot;))[, 2]) #&gt; [1] &quot; DejaVu Sans&quot; &quot; DejaVu Sans Mono&quot; #&gt; [3] &quot; DejaVu Serif&quot; &quot; Liberation Mono&quot; #&gt; [5] &quot; Liberation Sans&quot; &quot; Liberation Sans Narrow&quot; #&gt; [7] &quot; Liberation Serif&quot; &quot; URW Gothic L&quot; #&gt; [9] &quot; URW Bookman L&quot; &quot; Century Schoolbook L&quot; #&gt; [11] &quot; Nimbus Sans L&quot; &quot; Nimbus Roman No9 L&quot; #&gt; [13] &quot; Nimbus Mono L&quot; &quot; URW Palladio L&quot; #&gt; [15] &quot; URW Chancery L&quot; D.5 Pandoc pandoc 在 R Markdown 中是否可用 rmarkdown::pandoc_available() #&gt; [1] TRUE pandoc 版本 Sys.which(&quot;pandoc&quot;) #&gt; pandoc #&gt; &quot;/usr/bin/pandoc&quot; system(&quot;pandoc -v&quot;) #&gt; pandoc 2.2.1 #&gt; Compiled with pandoc-types 1.17.4.2, texmath 0.11, skylighting 0.7.0.2 #&gt; Default user data directory: /home/travis/.pandoc #&gt; Copyright (C) 2006-2018 John MacFarlane #&gt; Web: http://pandoc.org #&gt; This is free software; see the source for copying conditions. #&gt; There is no warranty, not even for merchantability or fitness #&gt; for a particular purpose. D.6 Rtools rtools 是否可用 devtools::find_rtools() #&gt; [1] TRUE 算个小栗子 fx &lt;- inline::cxxfunction( signature(x = &quot;integer&quot;, y = &quot;numeric&quot; ) , &#39; return ScalarReal( INTEGER(x)[0] * REAL(y)[0] ) ; &#39; ) fx( 2L, 5 ) #&gt; [1] 10 D.7 容器 D.7.1 rocker Dockerfile https://docs.docker.com/develop/develop-images/dockerfile_best-practices/ build https://docs.docker.com/engine/reference/builder/#usage D.7.2 Singularity https://github.com/bwlewis/r-and-singularity http://singularity.lbl.gov/ D.7.3 Kubernetes Kubernetes 容器集群管理 https://www.kubernetes.org.cn 参见高策的博客 http://gaocegege.com D.8 apt 适用于 Debian 和 Ubuntu 的软件包管理器 D.9 yum 适用于 Fedora 和 CentOS 的软件包管理器 D.10 tlmgr 基本使用已包含在 tinytex 包 (Xie 2018) 内 D.11 Git CR (Carriage Return) 表示回车，LF (Line Feed) 表示换行，Windows 下用回车加换行表示下一行，UNIX/Linux 采用换行符 (LF) 表示下一行，MAC OS 则采用回车符 (CR) 表示下一行 git config --global core.autocrlf false 添加子模块 git submodule add git://github.com/jgm/pandoc-templates.git templates 克隆项目 git clone --depth=10 --branch=master --recursive \\ git@github.com:XiangyunHuang/pandoc4everything.git 配置账户 git config --global user.email &quot;email&quot; git config --global user.name &quot;username&quot; touch .git-credentials echo &quot;https://username:password@github.com&quot; &gt;&gt; .git-credentials git config --global credential.helper store 往空的 Github 仓库添加本地文件 git init git remote add origin https://github.com/XiangyunHuang/notesdown.git git add -A git commit -m &quot;balabala&quot; git push -u origin master 本地新建仓库推送至远程分支 git remote add origin https://github.com/XiangyunHuang/notesdown.git git add . git commit -m &quot;init cos-art&quot; # 此时远程仓库 notesdown 还没有 cos-art 分支 git push origin master:cos-art 使用 zsh sudo apt update &amp;&amp; sudo apt install zsh sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot; D.12 其它 重复实现的关键是拉取一个现有的 Docker 镜像，可以免去安装和环境配置的诸多麻烦。 docker run --rm -it --name book -e \\ DISPLAY=192.168.99.100:0 -d -p 8282:8787 -e ROOT=TRUE \\ -e USER=rstudio -e PASSWORD=cloud rocker/geospatial DISPLAY=192.168.99.100:0 用于启用 X11 设备，否则 rgl 等软件包会报显示警告，--rm -it 使得 主机和虚拟机时间一致，否则会有警告10 # 两个与时间有关的警告 Warning message: running command &#39;timedatectl&#39; had status 1 Failed to create bus connection: No such file or directory https://stackoverflow.com/questions/43907925/ubuntu-timedatectl-fails-in-docker-container capabilities() jpeg png tiff tcltk X11 aqua http/ftp sockets libxml TRUE TRUE TRUE TRUE FALSE FALSE TRUE TRUE TRUE fifo cledit iconv NLS profmem cairo ICU long.double libcurl TRUE TRUE TRUE FALSE TRUE TRUE TRUE TRUE TRUE 主机端口号 8282，这里可以改成你自己喜欢的，虚拟机端口号 8787 对应 RStudio Server 默认端口，如果你想自己指定，就去修改 RStudio Server的配置文件。拉取的 Docker 镜像取名 book，这是方便以后启动 docker 时方便，只需 # 启动 docker start book # 进入 docker exec -it book bash 由于要安装 rstan 和 rstanarm 包，编译的过程中需要比较大的内存空间，默认分配给 docker 的内存要增加到 4 Gb，也就装个软件，大一点的基于 stan 实现的模型，还是适合放在大机器上跑，笔电可以跑跑简单的模型，学习一下就可以了。 R包库存放位置 .libPaths() #&gt; [1] &quot;/home/travis/R/Library&quot; &quot;/usr/local/lib/R/site-library&quot; #&gt; [3] &quot;/usr/lib/R/site-library&quot; &quot;/home/travis/R-bin/lib/R/library&quot; 查看系统路径，环境变量 strsplit(Sys.getenv(&quot;PATH&quot;),split = .Platform$path.sep) #&gt; [[1]] #&gt; [1] &quot;/usr/bin&quot; #&gt; [2] &quot;/home/travis/.rvm/gems/ruby-2.4.1/bin&quot; #&gt; [3] &quot;/home/travis/.rvm/gems/ruby-2.4.1@global/bin&quot; #&gt; [4] &quot;/home/travis/.rvm/rubies/ruby-2.4.1/bin&quot; #&gt; [5] &quot;/home/travis/.rvm/bin&quot; #&gt; [6] &quot;/home/travis/texlive/bin/x86_64-linux&quot; #&gt; [7] &quot;/home/travis/R-bin/bin&quot; #&gt; [8] &quot;/home/travis/bin&quot; #&gt; [9] &quot;/home/travis/.local/bin&quot; #&gt; [10] &quot;/opt/pyenv/shims&quot; #&gt; [11] &quot;/home/travis/.phpenv/shims&quot; #&gt; [12] &quot;/home/travis/perl5/perlbrew/bin&quot; #&gt; [13] &quot;/home/travis/.nvm/versions/node/v6.12.0/bin&quot; #&gt; [14] &quot;/home/travis/.kiex/elixirs/elixir-1.3.2/bin&quot; #&gt; [15] &quot;/home/travis/.kiex/bin&quot; #&gt; [16] &quot;/home/travis/gopath/bin&quot; #&gt; [17] &quot;/home/travis/.gimme/versions/go1.7.4.linux.amd64/bin&quot; #&gt; [18] &quot;/usr/local/phantomjs/bin&quot; #&gt; [19] &quot;/usr/local/phantomjs&quot; #&gt; [20] &quot;/usr/local/neo4j-3.2.7/bin&quot; #&gt; [21] &quot;/usr/local/cmake-3.9.2/bin&quot; #&gt; [22] &quot;/usr/local/clang-5.0.0/bin&quot; #&gt; [23] &quot;/usr/local/sbin&quot; #&gt; [24] &quot;/usr/local/bin&quot; #&gt; [25] &quot;/usr/sbin&quot; #&gt; [26] &quot;/usr/bin&quot; #&gt; [27] &quot;/sbin&quot; #&gt; [28] &quot;/bin&quot; #&gt; [29] &quot;/opt/ghc/bin&quot; #&gt; [30] &quot;/home/travis/.phpenv/bin&quot; #&gt; [31] &quot;/opt/pyenv/bin&quot; #&gt; [32] &quot;/home/travis/.yarn/bin&quot; 参考文献 "],
["reproduce.html", "E 重现", " E 重现 R sessionInfo(&quot;bookdown&quot;) #&gt; R version 3.4.4 (2017-01-27) #&gt; Platform: x86_64-pc-linux-gnu (64-bit) #&gt; Running under: Ubuntu 14.04.5 LTS #&gt; #&gt; Matrix products: default #&gt; BLAS: /home/travis/R-bin/lib/R/lib/libRblas.so #&gt; LAPACK: /home/travis/R-bin/lib/R/lib/libRlapack.so #&gt; #&gt; locale: #&gt; [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C #&gt; [3] LC_TIME=en_US.UTF-8 LC_COLLATE=en_US.UTF-8 #&gt; [5] LC_MONETARY=en_US.UTF-8 LC_MESSAGES=en_US.UTF-8 #&gt; [7] LC_PAPER=en_US.UTF-8 LC_NAME=C #&gt; [9] LC_ADDRESS=C LC_TELEPHONE=C #&gt; [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C #&gt; #&gt; attached base packages: #&gt; character(0) #&gt; #&gt; other attached packages: #&gt; [1] bookdown_0.7 #&gt; #&gt; loaded via a namespace (and not attached): #&gt; [1] Rcpp_0.12.16 grDevices_3.4.4 sysfonts_0.7.2 digest_0.6.15 #&gt; [5] showtextdb_2.0 rprojroot_1.3-2 Rttf2pt1_1.3.6 backports_1.1.2 #&gt; [9] magrittr_1.5 evaluate_0.10.1 datasets_3.4.4 stringi_1.2.2 #&gt; [13] utils_3.4.4 extrafontdb_1.0 graphics_3.4.4 rmarkdown_1.9 #&gt; [17] base_3.4.4 extrafont_0.17 tools_3.4.4 stringr_1.3.1 #&gt; [21] xfun_0.1 yaml_2.1.19 compiler_3.4.4 stats_3.4.4 #&gt; [25] htmltools_0.3.6 knitr_1.20 methods_3.4.4 pkg &lt;- .packages(all.available = TRUE) pkgInfo &lt;- lapply(pkg, packageDescription, fields = c(&quot;Package&quot;, &quot;Version&quot;, &quot;Maintainer&quot;, &quot;Title&quot;) ) knitr::kable(data.frame( Package = sapply(pkgInfo, `[[`, 1), Version = sapply(pkgInfo, `[[`, 2), # Maintainer = sapply(pkgInfo, &quot;[[&quot;, 3), Title = sapply(pkgInfo, &quot;[[&quot;, 4) ), caption = &quot;R包信息列表&quot;, booktabs = TRUE, longtable = TRUE ) LaTeX base::system(&#39;xelatex --version&#39;, intern = TRUE) #&gt; [1] &quot;XeTeX 3.14159265-2.6-0.99999 (TeX Live 2018)&quot; #&gt; [2] &quot;kpathsea version 6.3.0&quot; #&gt; [3] &quot;Copyright 2018 SIL International, Jonathan Kew and Khaled Hosny.&quot; #&gt; [4] &quot;There is NO warranty. Redistribution of this software is&quot; #&gt; [5] &quot;covered by the terms of both the XeTeX copyright and&quot; #&gt; [6] &quot;the Lesser GNU General Public License.&quot; #&gt; [7] &quot;For more information about these matters, see the file&quot; #&gt; [8] &quot;named COPYING and the XeTeX source.&quot; #&gt; [9] &quot;Primary author of XeTeX: Jonathan Kew.&quot; #&gt; [10] &quot;Compiled with ICU version 61.1; using 61.1&quot; #&gt; [11] &quot;Compiled with zlib version 1.2.11; using 1.2.11&quot; #&gt; [12] &quot;Compiled with FreeType2 version 2.9.0; using 2.9.0&quot; #&gt; [13] &quot;Compiled with Graphite2 version 1.3.11; using 1.3.11&quot; #&gt; [14] &quot;Compiled with HarfBuzz version 1.7.6; using 1.7.6&quot; #&gt; [15] &quot;Compiled with libpng version 1.6.34; using 1.6.34&quot; #&gt; [16] &quot;Compiled with poppler version 0.63.0&quot; #&gt; [17] &quot;Compiled with fontconfig version 2.11.0; using 2.11.0&quot; base::system(&#39;tlmgr info --list --only-installed --data name,size&#39;, intern = TRUE) #&gt; [1] &quot;a4wide,4096&quot; #&gt; [2] &quot;adjustbox,90112&quot; #&gt; [3] &quot;ae,643072&quot; #&gt; [4] &quot;algorithm2e,167936&quot; #&gt; [5] &quot;algorithms,16384&quot; #&gt; [6] &quot;amscls,323584&quot; #&gt; [7] &quot;amsfonts,7696384&quot; #&gt; [8] &quot;amsmath,196608&quot; #&gt; [9] &quot;animate,110592&quot; #&gt; [10] &quot;apacite,774144&quot; #&gt; [11] &quot;appendix,12288&quot; #&gt; [12] &quot;babel,3268608&quot; #&gt; [13] &quot;babel-english,36864&quot; #&gt; [14] &quot;babelbib,856064&quot; #&gt; [15] &quot;bbm-macros,16384&quot; #&gt; [16] &quot;beamer,1032192&quot; #&gt; [17] &quot;biblatex,2084864&quot; #&gt; [18] &quot;bibtex,208896&quot; #&gt; [19] &quot;bibtex.x86_64-linux,167936&quot; #&gt; [20] &quot;blkarray,73728&quot; #&gt; [21] &quot;booktabs,8192&quot; #&gt; [22] &quot;boondox,401408&quot; #&gt; [23] &quot;breakurl,12288&quot; #&gt; [24] &quot;caption,212992&quot; #&gt; [25] &quot;carlisle,45056&quot; #&gt; [26] &quot;ccaption,24576&quot; #&gt; [27] &quot;changepage,16384&quot; #&gt; [28] &quot;chemgreek,49152&quot; #&gt; [29] &quot;cite,73728&quot; #&gt; [30] &quot;cleveref,331776&quot; #&gt; [31] &quot;cm,1392640&quot; #&gt; [32] &quot;collectbox,12288&quot; #&gt; [33] &quot;collection-basic,0&quot; #&gt; [34] &quot;collection-latex,0&quot; #&gt; [35] &quot;colortbl,12288&quot; #&gt; [36] &quot;comment,12288&quot; #&gt; [37] &quot;courier,1191936&quot; #&gt; [38] &quot;csquotes,94208&quot; #&gt; [39] &quot;ctable,12288&quot; #&gt; [40] &quot;datetime,270336&quot; #&gt; [41] &quot;diagbox,12288&quot; #&gt; [42] &quot;doi,4096&quot; #&gt; [43] &quot;doublestroke,237568&quot; #&gt; [44] &quot;draftwatermark,4096&quot; #&gt; [45] &quot;dvipdfmx,163840&quot; #&gt; [46] &quot;dvipdfmx.x86_64-linux,20480&quot; #&gt; [47] &quot;dvips,380928&quot; #&gt; [48] &quot;dvips.x86_64-linux,376832&quot; #&gt; [49] &quot;dvisvgm,0&quot; #&gt; [50] &quot;dvisvgm.x86_64-linux,5492736&quot; #&gt; [51] &quot;ec,5918720&quot; #&gt; [52] &quot;enctex,253952&quot; #&gt; [53] &quot;enumitem,45056&quot; #&gt; [54] &quot;environ,8192&quot; #&gt; [55] &quot;eso-pic,16384&quot; #&gt; [56] &quot;etex,45056&quot; #&gt; [57] &quot;etex-pkg,20480&quot; #&gt; [58] &quot;etoolbox,49152&quot; #&gt; [59] &quot;euenc,57344&quot; #&gt; [60] &quot;eurosym,294912&quot; #&gt; [61] &quot;everypage,4096&quot; #&gt; [62] &quot;fancybox,28672&quot; #&gt; [63] &quot;fancyhdr,20480&quot; #&gt; [64] &quot;fancyvrb,73728&quot; #&gt; [65] &quot;fix2col,8192&quot; #&gt; [66] &quot;float,8192&quot; #&gt; [67] &quot;floatrow,90112&quot; #&gt; [68] &quot;fmtcount,290816&quot; #&gt; [69] &quot;fontspec,307200&quot; #&gt; [70] &quot;footmisc,28672&quot; #&gt; [71] &quot;fp,151552&quot; #&gt; [72] &quot;fpl,737280&quot; #&gt; [73] &quot;framed,24576&quot; #&gt; [74] &quot;geometry,45056&quot; #&gt; [75] &quot;glyphlist,98304&quot; #&gt; [76] &quot;graphics,126976&quot; #&gt; [77] &quot;graphics-cfg,8192&quot; #&gt; [78] &quot;graphics-def,86016&quot; #&gt; [79] &quot;gsftopk,8192&quot; #&gt; [80] &quot;gsftopk.x86_64-linux,94208&quot; #&gt; [81] &quot;hardwrap,12288&quot; #&gt; [82] &quot;harvard,225280&quot; #&gt; [83] &quot;helvetic,2433024&quot; #&gt; [84] &quot;hyperref,962560&quot; #&gt; [85] &quot;hyph-utf8,102400&quot; #&gt; [86] &quot;hyphen-base,98304&quot; #&gt; [87] &quot;ifluatex,8192&quot; #&gt; [88] &quot;ifmtarg,4096&quot; #&gt; [89] &quot;iftex,4096&quot; #&gt; [90] &quot;ifxetex,4096&quot; #&gt; [91] &quot;inconsolata,1302528&quot; #&gt; [92] &quot;jknapltx,77824&quot; #&gt; [93] &quot;kastrup,4096&quot; #&gt; [94] &quot;kerkis,3112960&quot; #&gt; [95] &quot;knuth-lib,192512&quot; #&gt; [96] &quot;knuth-local,212992&quot; #&gt; [97] &quot;koma-script,23203840&quot; #&gt; [98] &quot;kpathsea,208896&quot; #&gt; [99] &quot;kpathsea.x86_64-linux,163840&quot; #&gt; [100] &quot;l3experimental,286720&quot; #&gt; [101] &quot;l3kernel,1146880&quot; #&gt; [102] &quot;l3packages,155648&quot; #&gt; [103] &quot;lastpage,16384&quot; #&gt; [104] &quot;latex,1675264&quot; #&gt; [105] &quot;latex-bin,0&quot; #&gt; [106] &quot;latex-bin.x86_64-linux,16384&quot; #&gt; [107] &quot;latex-fonts,249856&quot; #&gt; [108] &quot;latexconfig,40960&quot; #&gt; [109] &quot;lineno,245760&quot; #&gt; [110] &quot;lipsum,106496&quot; #&gt; [111] &quot;listings,479232&quot; #&gt; [112] &quot;lm,43601920&quot; #&gt; [113] &quot;logreq,12288&quot; #&gt; [114] &quot;ltxmisc,69632&quot; #&gt; [115] &quot;lua-alt-getopt,4096&quot; #&gt; [116] &quot;luatex,151552&quot; #&gt; [117] &quot;luatex.x86_64-linux,26660864&quot; #&gt; [118] &quot;makeindex,36864&quot; #&gt; [119] &quot;makeindex.x86_64-linux,151552&quot; #&gt; [120] &quot;manfnt,4096&quot; #&gt; [121] &quot;marvosym,208896&quot; #&gt; [122] &quot;mathabx,880640&quot; #&gt; [123] &quot;mathpazo,167936&quot; #&gt; [124] &quot;mathspec,45056&quot; #&gt; [125] &quot;mathtools,114688&quot; #&gt; [126] &quot;mdwtools,126976&quot; #&gt; [127] &quot;memoir,487424&quot; #&gt; [128] &quot;metafont,147456&quot; #&gt; [129] &quot;metafont.x86_64-linux,696320&quot; #&gt; [130] &quot;metalogo,8192&quot; #&gt; [131] &quot;mflogo,16384&quot; #&gt; [132] &quot;mfnfss,32768&quot; #&gt; [133] &quot;mfware,16384&quot; #&gt; [134] &quot;mfware.x86_64-linux,593920&quot; #&gt; [135] &quot;mhchem,446464&quot; #&gt; [136] &quot;microtype,430080&quot; #&gt; [137] &quot;morefloats,40960&quot; #&gt; [138] &quot;mptopdf,176128&quot; #&gt; [139] &quot;mptopdf.x86_64-linux,4096&quot; #&gt; [140] &quot;ms,49152&quot; #&gt; [141] &quot;multirow,16384&quot; #&gt; [142] &quot;natbib,135168&quot; #&gt; [143] &quot;newtx,8867840&quot; #&gt; [144] &quot;nextpage,4096&quot; #&gt; [145] &quot;ntgclass,299008&quot; #&gt; [146] &quot;ntheorem,49152&quot; #&gt; [147] &quot;oberdiek,2879488&quot; #&gt; [148] &quot;palatino,1589248&quot; #&gt; [149] &quot;paralist,16384&quot; #&gt; [150] &quot;parskip,4096&quot; #&gt; [151] &quot;pbox,4096&quot; #&gt; [152] &quot;pdfcrop,40960&quot; #&gt; [153] &quot;pdfcrop.x86_64-linux,8192&quot; #&gt; [154] &quot;pdfpages,98304&quot; #&gt; [155] &quot;pdftex,266240&quot; #&gt; [156] &quot;pdftex.x86_64-linux,2191360&quot; #&gt; [157] &quot;pgf,5386240&quot; #&gt; [158] &quot;picinpar,16384&quot; #&gt; [159] &quot;pict2e,73728&quot; #&gt; [160] &quot;placeins,4096&quot; #&gt; [161] &quot;plain,1376256&quot; #&gt; [162] &quot;preprint,36864&quot; #&gt; [163] &quot;preview,57344&quot; #&gt; [164] &quot;pslatex,36864&quot; #&gt; [165] &quot;psnfss,450560&quot; #&gt; [166] &quot;pspicture,8192&quot; #&gt; [167] &quot;realscripts,8192&quot; #&gt; [168] &quot;relsize,16384&quot; #&gt; [169] &quot;rsfs,143360&quot; #&gt; [170] &quot;sauerj,32768&quot; #&gt; [171] &quot;scheme-basic,0&quot; #&gt; [172] &quot;scheme-infraonly,0&quot; #&gt; [173] &quot;scheme-minimal,0&quot; #&gt; [174] &quot;sectsty,24576&quot; #&gt; [175] &quot;setspace,24576&quot; #&gt; [176] &quot;shadethm,32768&quot; #&gt; [177] &quot;siunitx,323584&quot; #&gt; [178] &quot;soul,24576&quot; #&gt; [179] &quot;stmaryrd,401408&quot; #&gt; [180] &quot;subfig,32768&quot; #&gt; [181] &quot;subfigure,20480&quot; #&gt; [182] &quot;symbol,102400&quot; #&gt; [183] &quot;tabu,118784&quot; #&gt; [184] &quot;tabulary,16384&quot; #&gt; [185] &quot;tetex,516096&quot; #&gt; [186] &quot;tetex.x86_64-linux,77824&quot; #&gt; [187] &quot;tex,0&quot; #&gt; [188] &quot;tex-ini-files,32768&quot; #&gt; [189] &quot;tex.x86_64-linux,385024&quot; #&gt; [190] &quot;tex4ht,33177600&quot; #&gt; [191] &quot;tex4ht.x86_64-linux,299008&quot; #&gt; [192] &quot;texlive-common,0&quot; #&gt; [193] &quot;texlive-docindex,1105920&quot; #&gt; [194] &quot;texlive-en,0&quot; #&gt; [195] &quot;texlive-msg-translations,1167360&quot; #&gt; [196] &quot;texlive-scripts,282624&quot; #&gt; [197] &quot;texlive-scripts.x86_64-linux,8192&quot; #&gt; [198] &quot;texlive.infra,987136&quot; #&gt; [199] &quot;texlive.infra.x86_64-linux,270336&quot; #&gt; [200] &quot;textcase,4096&quot; #&gt; [201] &quot;threeparttable,20480&quot; #&gt; [202] &quot;thumbpdf,77824&quot; #&gt; [203] &quot;thumbpdf.x86_64-linux,4096&quot; #&gt; [204] &quot;times,1372160&quot; #&gt; [205] &quot;tipa,4489216&quot; #&gt; [206] &quot;titlesec,122880&quot; #&gt; [207] &quot;titling,8192&quot; #&gt; [208] &quot;tocbibind,12288&quot; #&gt; [209] &quot;tocloft,36864&quot; #&gt; [210] &quot;todonotes,20480&quot; #&gt; [211] &quot;tools,368640&quot; #&gt; [212] &quot;trimspaces,4096&quot; #&gt; [213] &quot;tufte-latex,110592&quot; #&gt; [214] &quot;txfonts,2285568&quot; #&gt; [215] &quot;ucs,2883584&quot; #&gt; [216] &quot;ulem,24576&quot; #&gt; [217] &quot;underscore,12288&quot; #&gt; [218] &quot;unicode-data,2277376&quot; #&gt; [219] &quot;updmap-map,19132416&quot; #&gt; [220] &quot;upquote,4096&quot; #&gt; [221] &quot;url,16384&quot; #&gt; [222] &quot;varwidth,12288&quot; #&gt; [223] &quot;vmargin,8192&quot; #&gt; [224] &quot;wrapfig,28672&quot; #&gt; [225] &quot;xargs,16384&quot; #&gt; [226] &quot;xcolor,81920&quot; #&gt; [227] &quot;xcomment,12288&quot; #&gt; [228] &quot;xdvi,36864&quot; #&gt; [229] &quot;xdvi.x86_64-linux,1282048&quot; #&gt; [230] &quot;xetex,24576&quot; #&gt; [231] &quot;xetex.x86_64-linux,27086848&quot; #&gt; [232] &quot;xetexconfig,4096&quot; #&gt; [233] &quot;xifthen,8192&quot; #&gt; [234] &quot;xkeyval,114688&quot; #&gt; [235] &quot;xltxtra,8192&quot; #&gt; [236] &quot;xstring,61440&quot; #&gt; [237] &quot;xtab,20480&quot; #&gt; [238] &quot;xunicode,208896&quot; #&gt; [239] &quot;zapfchan,241664&quot; #&gt; [240] &quot;zapfding,98304&quot; # or tinytex::tlmgr(c(&quot;info&quot;, &quot;--list&quot;, &quot;--only-installed&quot;, &quot;--data&quot;, &quot;name,size&quot;)) "],
["bookmarks.html", "F 书签 F.1 主页 F.2 博客 F.3 书单", " F 书签 F.1 主页 Eugene Joh 的博客 Ilya Kashnitsky 的博客 Max Woolf 的博客 Yan Holtz 的 ggplot2 图库 Jianghao Wang (王江浩) Xinpeng Chen Arthur Charpentier 法语 精算 or Arthur Charpentier François Husson 多元统计分析 Jean-Paul Fox Bayesian response modeling Julian faraway INLA When Small Data beats Big Data Shirin Glander Yihui Xie Beilei Bian Miao Yu Ce Gao Lchiffon Nan Xiao Xuening Zhu Guangchuang YU Qiang Kou Yixuan Qiu-cn or Yixuan Qiu-en Tao Gao Xunmo Yang Yalei Du Junchen Feng Sizhe Liu Liyun Chen Peng Zhao F.2 博客 基于分布式容器和高性能计算的R R and Singularity 利用 R 和 OpenCPU 搭建高可用的 HTTP 服务 Nearest Neighbor Gaussian Processes (NNGP) based models and Case study: NNGP based models in Stan Spatial Models in Stan: Intrinsic Auto-Regressive Models for Areal Data 空间模型之 Stan 实现 slides Easily Make Multi-tabbed .xlsx Files with openxlsx Map 函数 Deep learning at rstudio::conf 2018 深度学习与R语言,J.J.作为 RStudio 的 CEO 推动 tensorflow 在 R 中的使用，两个幻灯片值得好好看，J.J. 介绍 tensorflow Javier Luraschi介绍tf的部署 netlify travis-ci blog 搭建 blogdown https://bookdown.org/yihui/blogdown An Introduction to Spatial Econometrics in R spatial econometric analysis 空间经济分析 可考虑翻译一下 https://ignaciomsarmiento.github.io/2017/02/07/An-Introduction-to-Spatial-Econometrics-in-R Data Visualization Shiny Apps 数据可视化核密度估计 In this app I identify crime hotspots using a bivariate density estimation strategy Putting the Macron in Māori: Accented text in R Graphics Paul Murrell 图形中嵌入重音字符 color in plot Paul Murrell 配色 Using Computer Modern Fonts in R Graphics Paul Murrell 图形中嵌入数学字体 Lattice Graphics Paul Murrell 介绍 Lattice Graphics Association of Statisticians of American Religious Bodies (ASARB) viridis USA map Mapping unemployment data when-will-evolution-outperform-local-search 进化何时跑赢局部搜索 爱可可爱生活–进化如何跑赢局部搜索 Game of Thrones network analysis 权利的游戏 网络 Using Git and GitHub with R, Rstudio, and R Markdown 如何用Markdown写论文 blogdown和Github搭建网站 The R-INLA project and Bayesian computing with INLA Geographic Data Science in Python Spatial r-spatial Fast GeoSpatial Analysis in Python Spatial Data in R: New Directions Edzer Pebesma A gentle INLA tutorial F.3 书单 Pro Git 中文第二版 Scott Chacon, Ben Straub 著 Advanced R 第二版 Hadley Wickham 著 Geocomputation with R Robin Lovelace, Jakub Nowosad, Jannes Muenchow 著 R Markdown: The Definitive Guide Yihui Xie, J. J. Allaire, Garrett Grolemund 著 bookdown: Authoring Books and Technical Documents with R Markdown Yihui Xie 著 blogdown: Creating Websites with R Markdown Yihui Xie, Amber Thomas, Alison Presmanes Hill 著 R: A Language and Environment for Statistical Computing The R Core Team 著 LaTeX2e unofficial reference manual pdf 版 Statistical Rethinking Richard McElreath 著 Regression Modeling Strategies Frank E Harrell Jr 著 Applied Predictive Modeling Max Kuhn and Kjell Johnson 著 Forecasting: Principles and Practice Rob J Hyndman and George Athanasopoulos 著 Applied Regression Analysis and Generalized Linear Models 及书评 JASA-review 附录、样章和书评位于目录 docs/John-Fox 此节附录最后可以删掉 下面是用一段 Python 代码导出谷歌浏览器的所有书签 python py-chrome-bookmarks-markdown.py bookmarks.md Optimization Hyperparameter Optimization in H2O: Grid Search, Random Search and the Future – H2O blog R Optimization Test - Quantitative Finance Collector Research Seminar: Optimization Home - Statistics Views Vasicek model - Wikiwand CIR模型Cox–Ingersoll–Ross model - Wikipedia, the free encyclopedia BARON Software | Sahinidis 竞赛列表-DataCastle大数据竞赛平台 COIN-OR: Computational Infrastructure for Operations Research | Open-source Software for the Operations Research Community Portfolio Optimization in R, Part 4 | R-bloggers 时间序列分析 TensorFlow for Foreign Exchange Market: Analyzing Time-Series Data - Blog on All Things Cloud Foundry Predicting Heavy and Extreme Losses in Real-Time for Portfolio Holders (2) | Quant at Risk Why time series forecasts prediction intervals aren’t as good as we’d hope Error, trend, seasonality - ets and its forecast model friends Dual axes time series plots with various more awkward data R 语言 Togaware – Resources for the Data Scientist ParallelR高性能并行计算与R语言 R-Ladies global tour R-Ladies Global – R-Ladies is a world-wide organization to promote gender diversity in the R community Shane Lynn - Data science, analytics, and Startups Open Source Projects | NumFOCUS DataScience+ An online community for showcasing R &amp; Python tutorials Latest Posts – So Simple Theme Video Tutorial of PSO implementation in MATLAB Statistics.com - Course List - Online Courses me nugget Time Series Analysis and Its Applications: With R Examples - tsa4 (code实战)机器学习方法和性能比较 ggplot2 – The R graph Gallery quantumobject/docker-shiny - Docker Hub ggplot2绘图库 Highcharter 商业 john-coene.com Deep Learning in R – R Blog Zelig 统计推断方法合集 Paul Murrell’s Home Page Data Science Accelerator for Credit Risk Prediction (Revolutions) Credit Card Fraud Detection | Kaggle Python Jupyter Notebook Viewer Pyomo Bokeh Docs NumPy Tutorial: Data analysis with Python scikit-learn: machine learning in Python — scikit-learn 0.18.1 documentation Introduction to NumPy and Matplotlib - YouTube Data Science, Analytics and Big Data discussions The Python Graph Gallery – Visualizing data – with Python Data science, data analysis, and data engineering tutorials and articles. ŷhat | Image Processing with scikit-image 社交网络 Using the iGraph package to Analyse the Enron Corpus Help Us Map TrumpWorld Enron Email Dataset Statnet Mining Twitter with R graphTweets Building Wordclouds in R | DataScience+ API - 微博API Introducing tidygraph Network analysis of Game of Thrones | DataScience+ Using R packages and education to scale Data Science at Airbnb – Airbnb Engineering &amp; Data Science – Medium RPubs - Twitter Coverage of the ISMB/ECCB Conference 2017 UCI Network Data Repository 课程 DS-GA 1003: Machine Learning and Computational Statistics, Spring 2015 卡内基梅隆大学Machine Learning课程 课程列表: Deep Learning (概率图模型-卡内基梅隆大学) Probabilistic Graphical Models Learning Deep Learning课程资料大集合 课程Theoretical Machine Learning 机器学习算法观 (伯克利大学)机器学习导论课程Introduction to Machine Learning Intro to Apache Spark Training - Part 3 - YouTube 李宏毅深度学习(2017)_演讲•公开课_科技_bilibili_哔哩哔哩 1.1 《机器学习中的神经网络》为什么我们需要机器学习？_腾讯视频 In-depth introduction to machine learning in 15 hours of expert videos Gephi 中文教程 | Udemy Deep Learning PyTorch Caffe 2 | Caffe2 [福利] 深入理解 RNNs &amp; LSTM 网络学习资料 - 简书 TensorFlow中文社区-首页 Deep Learning in Energy Production context (wind, gas and oil) Off the convex path The Neural Network Zoo - The Asimov Institute Yann LeCun’s Home Page Yoshua Bengio Ian Goodfellow — Research Page Time Series Prediction With Deep Learning in Keras - Machine Learning Mastery 迁移学习 Keras R Information Systems Research The Ultimate List of TensorFlow Resources: Books, Tutorials &amp; More - Hacker Lists Neural Networks from Scratch, in R (Revolutions) [机器学习入门] 李宏毅机器学习笔记 Center for Machine Learning and Intelligent Systems | University of California, Irvine (支持向量机算法)LIBSVM – A Library for Support Vector Machines 软件测试 Jenkins Centos | Docker中文教程 Ubuntu – Ubuntu Packages Search Pandoc - Pandoc User’s Guide LaTeX 始终 风陵渡 fitsir的博客 Ethlisan | Ethan DENG’s Personal Homepage Cyberspace of Shujun LI李树钧 LaTeX写作专栏 – |经常| 在线 LaTeX 公式编辑器 Beamer Matrix ChinaTeX-Tex&amp;LaTeX are your typesetting friends. LaTeX Templates Overleaf Introduction | Learning-Markdown (Markdown 入门参考) MathJax | Beautiful math in all browsers. Pandoc - About pandoc TikZ and PGF | TeXample.net Rants from the Lab 国家企业信用信息公示系统 Linux命令大全(手册)_Linux常用命令行实例详解_Linux命令学习手册 生命不息 | 张宏伦的个人博客 大赛列表页 城市数据派-首页 研趣网 - 首个可视化商业价值挖掘和传播社区 inFERENCe MSDN, 我告诉你 RegExr: Learn, Build, &amp; Test RegEx rud.is | “In God we trust. All others must bring data” 北京理工大学 开源软件镜像服务 Statistics authors/titles recent submissions Wolfram|Alpha: Computational Knowledge Engine 中国科技论文在线 我是菜鸟 | IMCN开源资讯网 USGS.gov Index of /download/ensembles/data/Grid_0.44deg_rot The Stan Forums 论坛 - 六维空间 - 教育科研网分享测试平台 免费在线电影-新剧集影院官网-支持手机观看 CCTV-1 综合频道高清直播 BYR-IPTV 七牛云-国内领先的企业级云服务商 RStudio Community 电影天堂_免费电影_迅雷电影下载 80s电影网 - 高清手机电影迅雷下载_最新MP4电视剧磁力下载 Google gen.lib.rus.ec Octave Online · Cloud IDE compatible with MATLAB "],
["e58f82e88083e69687e78cae.html", "参考文献", " 参考文献 "]
]
